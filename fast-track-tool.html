<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fast Track - Team Dysfunction Assessment | Sprint 5 of 32</title>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <style>
        @font-face {
            font-family: 'Plaak';
            src: url('Plaak3Trial-43-Bold.otf') format('opentype');
            font-weight: 700;
            font-style: normal;
            font-display: swap;
        }
        
        @font-face {
            font-family: 'Riforma';
            src: url('RiformaLL-Regular.otf') format('opentype');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }
        
        :root {
            --black: #000000;
            --white: #FFFFFF;
            --grey-50: #F9FAFB;
            --grey-100: #F3F4F6;
            --grey-200: #E5E7EB;
            --grey-300: #D1D5DB;
            --grey-400: #9CA3AF;
            --grey-500: #6B7280;
            --grey-600: #4B5563;
            --grey-700: #374151;
            --grey-800: #1F2937;
            --grey-900: #111827;
            --yellow-50: #fffef5;
            --yellow-100: #fffde6;
            --yellow-200: #fffacc;
            --yellow-300: #fff7a3;
            --yellow-400: #fff469;
            --yellow-500: #f0e55a;
            --yellow-600: #d4c94f;
            --yellow-700: #a89e3e;
            --green: #10B981;
            --amber: #F59E0B;
            --red: #EF4444;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Riforma', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--white);
            color: var(--black);
            line-height: 1.7;
            font-size: 14px;
        }
        
        h1, h2, h3, h4, .heading {
            font-family: 'Plaak', Arial, sans-serif;
            font-weight: 700;
            line-height: 1.3;
        }
        
        h1 { font-size: 36px; }
        h2 { font-size: 28px; }
        h3 { font-size: 20px; letter-spacing: -0.01em; }
        h4 { font-size: 16px; }
        
        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 32px 24px;
        }
        
        /* Icons */
        .icon { display: inline-flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .icon svg { stroke-width: 2; }
        .icon-sm svg { width: 16px; height: 16px; }
        .icon-md svg { width: 20px; height: 20px; }
        .icon-lg svg { width: 24px; height: 24px; }
        
        /* Header */
        .header {
            background: var(--black);
            color: var(--white);
            padding: 12px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            max-width: 960px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 24px;
        }
        
        .sprint-badge {
            font-size: 13px;
            color: var(--grey-400);
        }
        
        .sprint-badge strong {
            color: var(--yellow-400);
        }
        
        .sap-display {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            font-weight: 600;
        }
        
        .sap-display .icon { color: var(--yellow-400); }
        
        .logo {
            background: var(--white);
            padding: 8px 12px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .logo img {
            height: 28px;
            width: auto;
            display: block;
        }
        
        /* Tabs */
        .tabs-nav {
            display: flex;
            gap: 0;
            border-bottom: 1px solid var(--grey-200);
            margin-bottom: 40px;
        }
        
        .tab-btn {
            padding: 16px 24px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-family: 'Riforma', sans-serif;
            font-weight: 400;
            font-size: 14px;
            color: var(--grey-500);
            transition: color 0.2s;
            border-bottom: 3px solid transparent;
            margin-bottom: -1px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tab-btn:hover:not(:disabled) {
            color: var(--grey-700);
        }
        
        .tab-btn.active {
            color: var(--black);
            border-bottom-color: var(--yellow-400);
        }
        
        .tab-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        
        .tab-btn .icon { color: inherit; }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Cards */
        .card {
            background: var(--white);
            border: 1px solid var(--grey-200);
            border-radius: 4px;
            padding: 32px;
            margin-bottom: 32px;
        }
        
        .card-yellow {
            border-color: var(--yellow-300);
            background: var(--yellow-50);
        }
        
        .card h3 {
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card h3 .icon { color: var(--grey-600); }
        
        /* Hero */
        .hero {
            background: var(--black);
            color: var(--white);
            padding: 48px;
            border-radius: 4px;
            margin-bottom: 40px;
        }
        
        .hero-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }
        
        .hero-header .icon { color: var(--yellow-400); }
        
        .hero h1 { font-size: 32px; margin-bottom: 8px; }
        .hero-subtitle { color: var(--grey-400); font-size: 14px; margin-bottom: 20px; }
        .hero p { color: var(--grey-300); font-size: 15px; max-width: 560px; line-height: 1.7; }
        
        /* Scope Grid */
        .scope-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 24px;
        }
        
        .scope-item {
            display: flex;
            align-items: flex-start;
            gap: 16px;
        }
        
        .scope-icon {
            width: 40px;
            height: 40px;
            background: var(--grey-100);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            color: var(--grey-600);
        }
        
        .scope-item h4 {
            font-size: 11px;
            color: var(--grey-500);
            margin-bottom: 4px;
            font-family: 'Riforma', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 400;
        }
        
        .scope-item p { font-weight: 500; color: var(--grey-800); font-size: 14px; }
        
        /* Warning */
        .warning-card {
            background: var(--white);
            border: 1px solid var(--yellow-300);
            border-left: 3px solid var(--yellow-400);
            border-radius: 4px;
            padding: 24px 32px;
            margin-bottom: 32px;
        }
        
        .warning-card h4 {
            color: var(--grey-800);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 20px;
        }
        
        .warning-card h4 .icon { color: var(--yellow-600); }
        
        .warning-card ul { margin-left: 28px; color: var(--grey-600); }
        .warning-card li { margin-bottom: 8px; }
        
        /* Key Learnings */
        .key-learning {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            padding: 16px 0;
            border-bottom: 1px solid var(--grey-100);
        }
        
        .key-learning:last-child { border-bottom: none; }
        
        .check-circle {
            width: 20px;
            height: 20px;
            color: var(--green);
            flex-shrink: 0;
            margin-top: 2px;
        }
        
        .key-learning span { color: var(--grey-700); }
        
        /* Buttons */
        .btn {
            padding: 12px 24px;
            border: 1px solid transparent;
            border-radius: 4px;
            font-family: 'Riforma', sans-serif;
            font-weight: 400;
            cursor: pointer;
            transition: opacity 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }
        
        .btn:hover:not(:disabled) { opacity: 0.8; }
        
        .btn-primary { 
            background: var(--black); 
            color: var(--white); 
            border-color: var(--black);
        }
        
        .btn-secondary { 
            background: var(--white); 
            color: var(--black); 
            border-color: var(--black);
        }
        
        .btn-yellow { 
            background: var(--yellow-400); 
            color: var(--black);
            border-color: var(--yellow-400);
        }
        
        .btn:disabled { opacity: 0.4; cursor: not-allowed; }
        
        .btn-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 32px;
            border-top: 1px solid var(--grey-200);
            gap: 16px;
        }
        
        /* Forms */
        input, select, textarea {
            font-family: 'Riforma', sans-serif;
            font-size: 14px;
            padding: 12px 16px;
            border: 1px solid var(--grey-300);
            border-radius: 4px;
            width: 100%;
            transition: border-color 0.2s;
            background: var(--white);
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--grey-500);
        }
        
        label {
            display: block;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--grey-700);
            font-size: 13px;
        }
        
        .form-group { margin-bottom: 20px; }
        
        /* Team Member Card */
        .team-member-card {
            background: var(--white);
            border: 1px solid var(--grey-200);
            border-radius: 4px;
            padding: 28px;
            margin-bottom: 20px;
        }
        
        .team-member-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 28px;
            flex-wrap: wrap;
        }
        
        .member-number {
            width: 32px;
            height: 32px;
            background: var(--yellow-400);
            color: var(--black);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            flex-shrink: 0;
        }
        
        .member-inputs {
            display: flex;
            gap: 12px;
            flex: 1;
            flex-wrap: wrap;
        }
        
        .member-inputs input {
            flex: 1;
            min-width: 150px;
        }
        
        .complete-badge {
            background: var(--green);
            color: white;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        /* Sliders */
        .sliders-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 24px;
        }
        
        .slider-container { position: relative; }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .slider-label span:first-child { 
            font-weight: 500; 
            font-size: 13px; 
            color: var(--grey-700);
        }
        
        .slider-score {
            font-size: 20px;
            font-weight: 700;
            min-width: 32px;
            text-align: right;
        }
        
        .slider-score.healthy { color: var(--green); }
        .slider-score.moderate { color: var(--amber); }
        .slider-score.critical { color: var(--red); }
        
        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--grey-200);
            outline: none;
            padding: 0;
            border: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--black);
            cursor: pointer;
            border: 2px solid var(--white);
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        
        .slider-hint {
            font-size: 11px;
            color: var(--grey-500);
            margin-top: 6px;
            min-height: 16px;
        }
        
        /* Progress */
        .progress-summary {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1px;
            background: var(--grey-200);
            border: 1px solid var(--grey-200);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 24px;
        }
        
        .progress-item {
            text-align: center;
            padding: 20px 16px;
            background: var(--white);
        }
        
        .progress-item h4 {
            font-size: 11px;
            color: var(--grey-500);
            margin-bottom: 6px;
            font-family: 'Riforma', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 400;
        }
        
        .progress-item .value { font-size: 22px; font-weight: 700; }
        
        /* Quick View */
        .quick-view {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            padding: 16px 20px;
            background: var(--grey-900);
            border-radius: 4px;
            margin-top: 20px;
        }
        
        .quick-view-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--white);
            font-size: 13px;
        }
        
        .traffic-light {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }
        
        .traffic-light.healthy { background: var(--green); }
        .traffic-light.moderate { background: var(--amber); }
        .traffic-light.critical { background: var(--red); }
        
        /* Brain Juice Box */
        .brain-juice-box {
            background: var(--white);
            border: 1px solid var(--grey-200);
            border-radius: 4px;
            padding: 28px;
            margin-bottom: 32px;
        }
        
        .brain-juice-box h4 {
            color: var(--grey-800);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 20px;
        }
        
        .brain-juice-box h4 .icon { color: var(--yellow-600); }
        
        .brain-juice-questions {
            display: grid;
            gap: 12px;
        }
        
        .brain-juice-question {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px 16px;
            background: var(--grey-50);
            border-radius: 4px;
            font-size: 13px;
        }
        
        .brain-juice-question strong {
            color: var(--grey-800);
            min-width: 90px;
            flex-shrink: 0;
            font-size: 12px;
        }
        
        .brain-juice-question span { color: var(--grey-600); }
        
        /* Priority Cards */
        .priority-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 8px;
        }
        
        .priority-card {
            padding: 24px;
            border-radius: 4px;
            text-align: center;
            color: white;
        }
        
        .priority-card.critical { background: var(--red); }
        .priority-card.moderate { background: var(--amber); }
        .priority-card.healthy { background: var(--green); }
        
        .priority-rank { font-size: 36px; font-weight: 900; opacity: 0.3; line-height: 1; }
        .priority-name { font-family: 'Plaak', sans-serif; font-size: 12px; margin: 8px 0; text-transform: uppercase; letter-spacing: 0.02em; }
        .priority-score { font-size: 22px; font-weight: 700; }
        .priority-status { font-size: 10px; text-transform: uppercase; letter-spacing: 0.1em; opacity: 0.9; margin-top: 4px; }
        
        /* Action Card */
        .action-card {
            background: var(--white);
            border: 1px solid var(--grey-200);
            border-radius: 4px;
            margin-bottom: 24px;
            overflow: hidden;
        }
        
        .action-card-header {
            background: var(--grey-50);
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--grey-200);
            gap: 12px;
        }
        
        .action-card-header span:first-child { font-size: 14px; }
        
        .action-card-body { padding: 28px; }
        
        .action-hint {
            background: var(--grey-50);
            border-radius: 4px;
            padding: 16px 20px;
            margin-bottom: 24px;
            font-size: 13px;
            color: var(--grey-600);
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }
        
        .action-hint .icon { color: var(--yellow-600); flex-shrink: 0; margin-top: 1px; }
        
        .action-fields {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }
        
        /* Action Progress Dots */
        .action-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--grey-300);
            transition: all 0.3s ease;
        }
        
        .action-dot.complete {
            background: var(--green);
        }
        
        /* Commitment */
        .commitment-section {
            background: var(--white);
            border: 1px solid var(--yellow-300);
            border-radius: 4px;
            padding: 32px;
            margin: 40px 0;
            animation: fadeSlideIn 0.5s ease-out;
        }
        
        @keyframes fadeSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .commitment-section h3 { 
            margin-bottom: 24px; 
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .commitment-section h3 .icon { color: var(--yellow-600); }
        
        .commitment-text {
            font-size: 15px;
            line-height: 2.4;
            margin-bottom: 28px;
            color: var(--grey-800);
        }
        
        .commitment-text input {
            border: none;
            border-bottom: 2px solid var(--black);
            background: transparent;
            width: auto;
            min-width: 160px;
            text-align: center;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 0;
        }
        
        .commitment-checkboxes { margin: 24px 0; }
        
        .checkbox-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 14px;
            font-size: 14px;
            color: var(--grey-700);
        }
        
        .checkbox-item .icon { color: var(--green); flex-shrink: 0; margin-top: 2px; }
        
        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin-top: 2px;
            flex-shrink: 0;
        }
        
        .checkbox-item input[type="date"] {
            width: auto;
            margin-left: 8px;
            padding: 6px 10px;
        }
        
        .forum-peers {
            background: var(--grey-50);
            border-radius: 4px;
            padding: 20px;
            margin-top: 24px;
        }
        
        .forum-peers h5 {
            font-size: 12px;
            color: var(--grey-600);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .forum-peers h5 .icon { color: var(--grey-500); }
        
        .peers-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 8px;
        }
        
        .peer-item {
            font-size: 13px;
            color: var(--grey-600);
            padding: 8px 12px;
            background: var(--white);
            border-radius: 4px;
        }
        
        .guru-note {
            margin-top: 20px;
            padding: 14px 16px;
            background: var(--white);
            border-radius: 4px;
            font-size: 13px;
            color: var(--grey-600);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .guru-note .icon { color: var(--grey-500); }
        
        .signature-field {
            margin-top: 28px;
            padding-top: 28px;
            border-top: 1px solid var(--grey-200);
        }
        
        .signature-field label {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .signature-field label .icon { color: var(--grey-500); }
        
        .signature-field input {
            font-family: 'Georgia', serif;
            font-size: 20px;
            font-style: italic;
            padding: 16px;
            border: 1px dashed var(--grey-400);
            text-align: center;
            margin-top: 8px;
        }
        
        /* Dashboard */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1px;
            background: var(--grey-200);
            border: 1px solid var(--grey-200);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 32px;
        }
        
        .stat-card {
            background: var(--white);
            padding: 24px 20px;
            text-align: center;
        }
        
        .stat-card .icon-wrap {
            width: 40px;
            height: 40px;
            margin: 0 auto 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--grey-600);
        }
        
        .stat-card .icon-wrap.yellow { color: var(--yellow-600); }
        
        .stat-card .value { font-size: 28px; font-weight: 700; font-family: 'Plaak', sans-serif; }
        .stat-card .label { font-size: 12px; color: var(--grey-500); margin-top: 4px; }
        
        /* Mastery */
        .mastery-card {
            background: var(--yellow-400);
            border-radius: 4px;
            padding: 28px;
            margin-bottom: 32px;
            color: var(--black);
        }
        
        .mastery-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            gap: 16px;
        }
        
        .mastery-level { font-size: 12px; text-transform: uppercase; letter-spacing: 0.1em; }
        .mastery-level span { font-family: 'Plaak', sans-serif; font-size: 22px; display: block; margin-top: 4px; }
        .mastery-sap { text-align: right; }
        .mastery-sap .value { font-size: 26px; font-weight: 700; }
        .mastery-sap .label { font-size: 12px; opacity: 0.7; }
        
        .progress-bar {
            height: 6px;
            background: rgba(0,0,0,0.15);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-bar-fill {
            height: 100%;
            background: var(--black);
            border-radius: 3px;
            transition: width 0.5s ease;
        }
        
        .mastery-next { margin-top: 12px; font-size: 13px; opacity: 0.7; }
        
        /* Heat Map */
        .heat-map { overflow-x: auto; }
        
        .heat-map table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }
        
        .heat-map th, .heat-map td {
            padding: 12px 10px;
            text-align: center;
            border-bottom: 1px solid var(--grey-200);
        }
        
        .heat-map th { 
            font-weight: 600; 
            color: var(--grey-600);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .heat-map th:first-child, .heat-map td:first-child { text-align: left; }
        .heat-map tr:last-child td { border-bottom: none; font-weight: 600; }
        
        .heat-cell {
            display: inline-block;
            min-width: 36px;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
            font-size: 13px;
            color: white;
        }
        
        .heat-cell.healthy { background: var(--green); }
        .heat-cell.moderate { background: var(--amber); }
        .heat-cell.critical { background: var(--red); }
        
        /* Action Tracker */
        .action-tracker-row {
            display: grid;
            grid-template-columns: 100px 1fr 120px 90px 90px;
            gap: 12px;
            padding: 14px 0;
            border-bottom: 1px solid var(--grey-100);
            align-items: center;
            font-size: 13px;
        }
        
        .action-tracker-row:first-child {
            font-weight: 600;
            color: var(--grey-600);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding-bottom: 12px;
        }
        
        .action-tracker-row:last-child { border-bottom: none; }
        
        .status-badge {
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-align: center;
            background: var(--amber);
            color: white;
        }
        
        /* Reflection */
        .reflection-section {
            background: var(--white);
            border: 1px solid var(--grey-200);
            border-radius: 4px;
            padding: 32px;
            margin: 32px 0;
        }
        
        .reflection-section h3 { 
            margin-bottom: 8px; 
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .reflection-section h3 .icon { color: var(--grey-600); }
        
        .reflection-section > p { color: var(--grey-500); margin-bottom: 24px; font-size: 13px; }
        
        .reflection-question { margin-bottom: 24px; }
        .reflection-question:last-child { margin-bottom: 0; }
        .reflection-question textarea { min-height: 80px; resize: vertical; }
        
        /* Sprint Complete */
        .sprint-complete-card {
            background: var(--green);
            color: white;
            border-radius: 4px;
            padding: 28px;
            margin-bottom: 32px;
        }
        
        .sprint-complete-card h3 { 
            margin-bottom: 8px; 
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .sprint-complete-card p { opacity: 0.9; font-size: 14px; }
        
        .sprint-complete-dates {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.3);
        }
        
        .sprint-complete-dates div { text-align: center; }
        .sprint-complete-dates label { display: block; font-size: 11px; opacity: 0.7; margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.05em; }
        .sprint-complete-dates span { font-weight: 700; font-size: 14px; }
        
        /* Sprint Context */
        .sprint-context {
            background: var(--grey-900);
            color: var(--white);
            border-radius: 4px;
            padding: 20px 24px;
            margin-bottom: 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
        }
        
        .sprint-context h4 { 
            color: var(--green); 
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .sprint-progress-text { color: var(--grey-400); font-size: 13px; }
        
        /* Export */
        .export-buttons {
            display: flex;
            gap: 12px;
            margin-bottom: 28px;
        }
        
        
        /* Expandable */
        .expandable {
            border: 1px solid var(--grey-200);
            border-radius: 4px;
            margin-bottom: 16px;
            overflow: hidden;
        }
        
        .expandable-header {
            padding: 16px 20px;
            background: var(--white);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 500;
            font-size: 14px;
        }
        
        .expandable-header:hover { background: var(--grey-50); }
        
        .expandable-header .icon { color: var(--grey-500); transition: transform 0.2s; }
        
        .expandable.open .expandable-header .icon { transform: rotate(180deg); }
        
        .expandable-content {
            padding: 20px;
            border-top: 1px solid var(--grey-200);
            display: none;
            background: var(--grey-50);
        }
        
        .expandable.open .expandable-content { display: block; }
        
        /* Chart */
        .chart-bars { margin: 24px 0 0; }
        
        .chart-bar-item {
            display: flex;
            align-items: center;
            margin-bottom: 14px;
            gap: 16px;
        }
        
        .chart-bar-item:last-child { margin-bottom: 0; }
        
        .chart-bar-label {
            width: 80px;
            font-size: 12px;
            font-weight: 500;
            color: var(--grey-600);
            flex-shrink: 0;
        }
        
        .chart-bar-track {
            flex: 1;
            height: 20px;
            background: var(--grey-100);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .chart-bar-fill {
            height: 100%;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            color: white;
            font-weight: 600;
            font-size: 11px;
            min-width: 28px;
            transition: width 0.3s ease;
        }
        
        .chart-bar-fill.healthy { background: var(--green); }
        .chart-bar-fill.moderate { background: var(--amber); }
        .chart-bar-fill.critical { background: var(--red); }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header-content { flex-wrap: wrap; }
            .sprint-badge { display: none; }
            .hero { padding: 32px 24px; }
            .hero h1 { font-size: 20px; }
            .tabs-nav { overflow-x: auto; }
            .tab-btn { padding: 12px 16px; font-size: 13px; white-space: nowrap; }
            .progress-summary { grid-template-columns: repeat(2, 1fr); }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            .priority-cards { grid-template-columns: 1fr; }
            .action-fields { grid-template-columns: 1fr; }
            .action-tracker-row { grid-template-columns: 1fr; gap: 8px; }
            .sliders-grid { grid-template-columns: 1fr 1fr; }
            .sprint-complete-dates { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="header-left">
                <span class="sprint-badge"><strong>Sprint 5</strong> of 32 | Team Dynamics</span>
                <div class="sap-display">
                    <span class="icon icon-sm"><i data-lucide="star"></i></span>
                    <span id="sap-count">0 SAP</span>
                </div>
            </div>
            <div class="logo">
                <img src="fast track tool logo.png" alt="Fast Track">
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Tabs Navigation -->
        <nav class="tabs-nav">
            <button class="tab-btn active" onclick="showTab('reference')" id="tab-reference">
                <span class="icon icon-sm"><i data-lucide="book-open"></i></span>
                Reference
            </button>
            <button class="tab-btn" onclick="showTab('assessment')" id="tab-assessment">
                <span class="icon icon-sm"><i data-lucide="bar-chart-2"></i></span>
                Assessment
            </button>
            <button class="tab-btn" onclick="showTab('action')" id="tab-action" disabled>
                <span class="icon icon-sm"><i data-lucide="lock"></i></span>
                Action Plan
            </button>
            <button class="tab-btn" onclick="showTab('dashboard')" id="tab-dashboard" disabled>
                <span class="icon icon-sm"><i data-lucide="lock"></i></span>
                Dashboard
            </button>
        </nav>

        <!-- TAB 1: REFERENCE -->
        <div id="reference" class="tab-content active">
            <div class="hero">
                <div class="hero-header">
                    <span class="icon icon-lg"><i data-lucide="lightbulb"></i></span>
                    <h1>Brain Juice Applied</h1>
                </div>
                <p class="hero-subtitle">Sprint 5 of 32 | Module: Individual & Company Identity</p>
                <p>Based on Patrick Lencioni's Five Dysfunctions Framework. Apply what you've learned to assess YOUR team.</p>
            </div>

            <div class="card">
                <h3>
                    <span class="icon icon-md"><i data-lucide="clipboard-list"></i></span>
                    Assessment Scope
                </h3>
                <div class="scope-grid">
                    <div class="scope-item">
                        <div class="scope-icon"><i data-lucide="users"></i></div>
                        <div>
                            <h4>Scope</h4>
                            <p>Your C-level team (5-8 direct reports)</p>
                        </div>
                    </div>
                    <div class="scope-item">
                        <div class="scope-icon"><i data-lucide="calendar"></i></div>
                        <div>
                            <h4>Time Frame</h4>
                            <p>Last 90 days observed</p>
                        </div>
                    </div>
                    <div class="scope-item">
                        <div class="scope-icon"><i data-lucide="eye"></i></div>
                        <div>
                            <h4>Perspective</h4>
                            <p>Your honest assessment as CEO</p>
                        </div>
                    </div>
                    <div class="scope-item">
                        <div class="scope-icon"><i data-lucide="x-circle"></i></div>
                        <div>
                            <h4>Exclude</h4>
                            <p>Yourself, board, indirect reports</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="warning-card">
                <h4>
                    <span class="icon icon-md"><i data-lucide="alert-triangle"></i></span>
                    Common Mistakes to Avoid
                </h4>
                <ul>
                    <li>Don't rate how you WANT team to be - rate CURRENT reality</li>
                    <li>Rate based on OBSERVED BEHAVIORS only</li>
                    <li>Don't confuse absence of dysfunction with presence of health</li>
                </ul>
            </div>

            <div class="card">
                <h3>
                    <span class="icon icon-md"><i data-lucide="check-circle"></i></span>
                    80/20 Key Learnings
                </h3>
                <div class="key-learning">
                    <span class="check-circle"><i data-lucide="check"></i></span>
                    <span>Building trust is fundamental - the foundation of all teamwork</span>
                </div>
                <div class="key-learning">
                    <span class="check-circle"><i data-lucide="check"></i></span>
                    <span>Constructive conflict drives innovation - embrace healthy debate</span>
                </div>
                <div class="key-learning">
                    <span class="check-circle"><i data-lucide="check"></i></span>
                    <span>Commitment leads to action - buy-in creates momentum</span>
                </div>
                <div class="key-learning">
                    <span class="check-circle"><i data-lucide="check"></i></span>
                    <span>Accountability sustains progress - peers hold each other to standards</span>
                </div>
                <div class="key-learning">
                    <span class="check-circle"><i data-lucide="check"></i></span>
                    <span>Focus on collective results - "we" over "me" wins</span>
                </div>
            </div>

            <div class="expandable" onclick="this.classList.toggle('open')">
                <div class="expandable-header">
                    <span style="display:flex; align-items:center; gap:10px;">
                        <span class="icon icon-sm"><i data-lucide="target"></i></span>
                        Tune In Questions (From Brain Juice)
                    </span>
                    <span class="icon icon-sm"><i data-lucide="chevron-down"></i></span>
                </div>
                <div class="expandable-content">
                    <ol style="margin-left: 20px; color: var(--grey-700);">
                        <li style="margin-bottom: 12px;">What are the most significant challenges your team currently faces in achieving its goals?</li>
                        <li style="margin-bottom: 12px;">How do you think trust, communication, and accountability influence your team's performance?</li>
                        <li>Why is it important for all team members to be aligned with the company's vision and values?</li>
                    </ol>
                </div>
            </div>

            <div class="btn-nav">
                <div></div>
                <button class="btn btn-primary" onclick="showTab('assessment')">
                    Begin Your Assessment
                    <span class="icon icon-sm"><i data-lucide="arrow-right"></i></span>
                </button>
            </div>
        </div>

        <!-- TAB 2: ASSESSMENT -->
        <div id="assessment" class="tab-content">
            <!-- Load Example Prompt -->
            <div class="card example-prompt" id="example-prompt" style="background: linear-gradient(135deg, var(--yellow-50) 0%, var(--white) 100%); border: 2px solid var(--yellow-300);">
                <div style="display: flex; align-items: flex-start; gap: 20px; flex-wrap: wrap;">
                    <div style="flex: 1; min-width: 280px;">
                        <h3 style="margin-bottom: 12px; display: flex; align-items: center; gap: 10px;">
                            <span class="icon icon-md" style="color: var(--yellow-600);"><i data-lucide="lightbulb"></i></span>
                            New to the Assessment?
                        </h3>
                        <p style="color: var(--grey-600); margin-bottom: 16px; line-height: 1.7;">
                            Load example data to see how the tool works before entering your own team's information. 
                            This will populate the form with a sample C-level team assessment.
                        </p>
                        <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                            <button class="btn btn-yellow" onclick="loadExampleAndHide()">
                                <span class="icon icon-sm"><i data-lucide="clipboard-paste"></i></span>
                                Load Example Data
                            </button>
                            <button class="btn btn-secondary" onclick="hideExamplePrompt()">
                                Start Fresh
                            </button>
                        </div>
                    </div>
                    <div style="background: var(--white); border: 1px solid var(--grey-200); border-radius: 4px; padding: 16px; min-width: 200px;">
                        <h5 style="font-size: 12px; color: var(--grey-500); margin-bottom: 10px; text-transform: uppercase; letter-spacing: 0.5px;">Example includes:</h5>
                        <ul style="font-size: 13px; color: var(--grey-600); margin: 0; padding-left: 18px; line-height: 1.8;">
                            <li>5 team members with roles</li>
                            <li>All dysfunction ratings</li>
                            <li>CEO & company info</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>
                    <span class="icon icon-md"><i data-lucide="bar-chart-2"></i></span>
                    Assessment Progress
                </h3>
                <div class="progress-summary">
                    <div class="progress-item">
                        <h4>Team Members</h4>
                        <div class="value" id="named-count">0/5+</div>
                    </div>
                    <div class="progress-item">
                        <h4>Ratings Complete</h4>
                        <div class="value" id="ratings-count">0/0</div>
                    </div>
                    <div class="progress-item">
                        <h4>Members Complete</h4>
                        <div class="value" id="complete-count">0/5</div>
                    </div>
                    <div class="progress-item">
                        <h4>Status</h4>
                        <div class="value" id="status-text" style="color: var(--amber);">In Progress</div>
                    </div>
                </div>
                <div class="quick-view" id="quick-view" style="display: none;">
                    <strong style="color: var(--grey-400);">Quick View:</strong>
                    <div id="quick-view-items" style="display: contents;"></div>
                </div>
            </div>

            <div class="brain-juice-box">
                <h4>
                    <span class="icon icon-md"><i data-lucide="book-open"></i></span>
                    You've learned the framework. Now assess YOUR team's reality.
                </h4>
                <div class="brain-juice-questions">
                    <div class="brain-juice-question"><strong>TRUST:</strong><span>Do team members admit mistakes openly?</span></div>
                    <div class="brain-juice-question"><strong>CONFLICT:</strong><span>Passionate debates or artificial harmony?</span></div>
                    <div class="brain-juice-question"><strong>COMMITMENT:</strong><span>Do decisions stick or get revisited?</span></div>
                    <div class="brain-juice-question"><strong>ACCOUNTABILITY:</strong><span>Peers hold each other accountable or only CEO?</span></div>
                    <div class="brain-juice-question"><strong>RESULTS:</strong><span>Team prioritizes "we" over "me"?</span></div>
                </div>
            </div>

            <div id="team-members-container"></div>

            <button class="btn btn-secondary" onclick="addTeamMember()" id="add-member-btn" style="width: 100%; margin-bottom: 24px;">
                <span class="icon icon-sm"><i data-lucide="plus"></i></span>
                Add Team Member (5/8)
            </button>

            <div class="btn-nav">
                <button class="btn btn-secondary" onclick="showTab('reference')">
                    <span class="icon icon-sm"><i data-lucide="arrow-left"></i></span>
                    Back to Reference
                </button>
                <button class="btn btn-primary" onclick="showTab('action')" id="continue-action-btn" disabled>
                    Continue to Action Plan
                    <span class="icon icon-sm"><i data-lucide="arrow-right"></i></span>
                </button>
            </div>
        </div>

        <!-- TAB 3: ACTION PLAN -->
        <div id="action" class="tab-content">
            <div class="card card-yellow">
                <h3>
                    <span class="icon icon-md"><i data-lucide="target"></i></span>
                    Your Top 3 Priority Areas
                </h3>
                <p style="color: var(--grey-600); margin-bottom: 24px; margin-top: -16px; font-size: 13px;">Auto-calculated from your assessment scores (lowest = highest priority)</p>
                <div class="priority-cards" id="priority-cards"></div>
            </div>

            <div id="action-cards-container"></div>

            <!-- Actions incomplete message -->
            <div id="actions-incomplete-msg" class="card" style="text-align: center; padding: 48px 32px; background: var(--grey-50); border: 2px dashed var(--grey-300);">
                <span class="icon icon-lg" style="color: var(--grey-400); margin-bottom: 16px;"><i data-lucide="clipboard-list"></i></span>
                <h4 style="margin-bottom: 8px; color: var(--grey-600);">Complete Your Action Plans</h4>
                <p style="color: var(--grey-500); margin-bottom: 0;">Fill out all 3 action cards above to unlock the commitment section</p>
                <div id="actions-progress" style="margin-top: 16px; display: flex; gap: 8px; justify-content: center;">
                    <span class="action-dot"></span>
                    <span class="action-dot"></span>
                    <span class="action-dot"></span>
                </div>
            </div>

            <div class="commitment-section" id="commitment-section" style="display: none;">
                <div style="background: var(--green); color: white; padding: 16px 20px; border-radius: 4px; margin-bottom: 24px; display: flex; align-items: center; gap: 12px;">
                    <span class="icon icon-md"><i data-lucide="check-circle"></i></span>
                    <div>
                        <strong style="font-size: 14px;">All Actions Complete!</strong>
                        <p style="margin: 0; font-size: 13px; opacity: 0.9;">Now make your public commitment below to lock in accountability.</p>
                    </div>
                </div>
                <h3>
                    <span class="icon icon-md"><i data-lucide="award"></i></span>
                    Public Commitment Declaration
                </h3>
                
                <div class="commitment-text">
                    I, <input type="text" id="ceo-name" placeholder="Your name" style="width: 180px;">, 
                    as CEO of <input type="text" id="company-name" placeholder="Company name" style="width: 200px;">, 
                    commit to implementing these 3 actions.
                </div>

                <div class="commitment-checkboxes">
                    <div class="checkbox-item">
                        <span class="icon icon-sm"><i data-lucide="check"></i></span>
                        <span>Implementing these 3 actions starting <strong id="first-action-date">[set date above]</strong></span>
                    </div>
                    <div class="checkbox-item">
                        <span class="icon icon-sm"><i data-lucide="check"></i></span>
                        <span>Presenting results at Forum meeting on <input type="date" id="forum-date"></span>
                    </div>
                    <div class="checkbox-item">
                        <span class="icon icon-sm"><i data-lucide="check"></i></span>
                        <span>Sharing with my leadership team on <input type="date" id="team-share-date"></span>
                    </div>
                    <div class="checkbox-item">
                        <span class="icon icon-sm"><i data-lucide="check"></i></span>
                        <span>Reviewing progress monthly with my Guru (scheduled for <input type="date" id="guru-review-date">)</span>
                    </div>
                    <div class="checkbox-item" style="margin-top: 20px; background: var(--grey-50); padding: 16px; border-radius: 4px;">
                        <input type="checkbox" id="binding-commitment">
                        <span><strong>I understand this is a BINDING COMMITMENT witnessed by my Forum peers</strong></span>
                    </div>
                </div>

                <div class="forum-peers">
                    <h5>
                        <span class="icon icon-sm"><i data-lucide="megaphone"></i></span>
                        This commitment will be visible to:
                    </h5>
                    <div class="peers-list">
                        <div class="peer-item">Maria Santos - CEO, TechCorp Manufacturing</div>
                        <div class="peer-item">John Peterson - CEO, HealthPlus Medical</div>
                        <div class="peer-item">Sarah Chen - CEO, GreenEnergy Solutions</div>
                        <div class="peer-item">Mike Rodriguez - CEO, DataFlow Systems</div>
                        <div class="peer-item">Lisa Kumar - CEO, CloudFirst Technologies</div>
                        <div class="peer-item">Tom Anderson - CEO, RetailMax Group</div>
                        <div class="peer-item">Jennifer Lee - CEO, BuildRight Construction</div>
                        <div class="peer-item">David Park - CEO, FinanceHub</div>
                    </div>
                </div>

                <div class="guru-note">
                    <span class="icon icon-sm"><i data-lucide="user"></i></span>
                    Your Guru will review this assessment before your Forum presentation
                </div>

                <div class="signature-field">
                    <label>
                        <span class="icon icon-sm"><i data-lucide="pen-tool"></i></span>
                        Digital Signature (type your full name)
                    </label>
                    <input type="text" id="signature" placeholder="Type your full name to sign">
                </div>
            </div>

            <div class="btn-nav">
                <button class="btn btn-secondary" onclick="showTab('assessment')">
                    <span class="icon icon-sm"><i data-lucide="arrow-left"></i></span>
                    Back to Assessment
                </button>
                <button class="btn btn-primary" onclick="showTab('dashboard')" id="view-dashboard-btn" disabled>
                    View Dashboard
                    <span class="icon icon-sm"><i data-lucide="arrow-right"></i></span>
                </button>
            </div>
        </div>

        <!-- TAB 4: DASHBOARD -->
        <div id="dashboard" class="tab-content">
            <div class="export-buttons">
                <button class="btn btn-primary" onclick="window.print()">
                    <span class="icon icon-sm"><i data-lucide="file-text"></i></span>
                    Export PDF
                </button>
                <button class="btn btn-secondary" onclick="copyLink()">
                    <span class="icon icon-sm"><i data-lucide="link"></i></span>
                    Copy Link
                </button>
            </div>

            <div class="mastery-card">
                <div class="mastery-header">
                    <div class="mastery-level">
                        Current Level
                        <span id="mastery-level">NOVICE</span>
                    </div>
                    <div class="mastery-sap">
                        <div class="value" id="mastery-sap">0</div>
                        <div class="label">SAP</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-bar-fill" id="mastery-progress" style="width: 0%"></div>
                </div>
                <div class="mastery-next" id="mastery-next">200 more SAP needed for PRACTITIONER level</div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="icon-wrap"><i data-lucide="bar-chart-2"></i></div>
                    <div class="value" id="overall-score">0.0</div>
                    <div class="label">Team Health Score</div>
                </div>
                <div class="stat-card">
                    <div class="icon-wrap" id="critical-icon-wrap"><i data-lucide="alert-triangle"></i></div>
                    <div class="value" id="critical-count">0</div>
                    <div class="label">Critical Areas</div>
                </div>
                <div class="stat-card">
                    <div class="icon-wrap"><i data-lucide="clipboard-check"></i></div>
                    <div class="value" id="actions-count">0</div>
                    <div class="label">Actions Committed</div>
                </div>
                <div class="stat-card">
                    <div class="icon-wrap yellow"><i data-lucide="star"></i></div>
                    <div class="value" style="color: var(--yellow-600);" id="sap-earned">+0</div>
                    <div class="label">SAP Earned</div>
                </div>
            </div>

            <div class="sprint-context">
                <h4>
                    <span class="icon icon-sm"><i data-lucide="check-circle"></i></span>
                    Sprint 5 of 32 Complete!
                </h4>
                <div class="sprint-progress-text">You're 15.6% through the Fast Track Program</div>
            </div>

            <div class="card">
                <h3>
                    <span class="icon icon-md"><i data-lucide="grid-3x3"></i></span>
                    Team Health Heat Map
                </h3>
                <div class="heat-map">
                    <table id="heat-map-table">
                        <thead>
                            <tr>
                                <th>Team Member</th>
                                <th>Role</th>
                                <th>Trust</th>
                                <th>Conflict</th>
                                <th>Commit</th>
                                <th>Account</th>
                                <th>Results</th>
                            </tr>
                        </thead>
                        <tbody id="heat-map-body"></tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                <h3>
                    <span class="icon icon-md"><i data-lucide="bar-chart-2"></i></span>
                    Dysfunction Scores
                </h3>
                <div class="chart-bars" id="chart-bars"></div>
            </div>

            <div class="card">
                <h3>
                    <span class="icon icon-md"><i data-lucide="clipboard-list"></i></span>
                    Action Tracker
                </h3>
                <div id="action-tracker">
                    <div class="action-tracker-row">
                        <div>Dysfunction</div>
                        <div>Action</div>
                        <div>Owner</div>
                        <div>Start</div>
                        <div>Status</div>
                    </div>
                </div>
            </div>

            <div class="reflection-section">
                <h3>
                    <span class="icon icon-md"><i data-lucide="edit-3"></i></span>
                    Reflection Time
                </h3>
                <p>Before presenting at Forum, reflect on these questions from your Brain Juice:</p>
                
                <div class="reflection-question">
                    <label>How will you actively contribute to building trust within your team?</label>
                    <textarea id="reflection-trust" placeholder="Reflect on your role in building trust..."></textarea>
                </div>
                <div class="reflection-question">
                    <label>What steps will you take to ensure that conflict is managed constructively?</label>
                    <textarea id="reflection-conflict" placeholder="Reflect on how you'll handle conflict..."></textarea>
                </div>
                <div class="reflection-question">
                    <label>How can you reinforce accountability and ensure team goals are prioritized?</label>
                    <textarea id="reflection-accountability" placeholder="Reflect on accountability systems..."></textarea>
                </div>
            </div>

            <div class="sprint-complete-card">
                <h3>
                    <span class="icon icon-md"><i data-lucide="sparkles"></i></span>
                    Sprint Complete!
                </h3>
                <p>You've committed to meaningful action. Strong momentum!</p>
                <div class="sprint-complete-dates">
                    <div><label>Forum Date</label><span id="final-forum-date">Not set</span></div>
                    <div><label>Team Share</label><span id="final-team-date">Not set</span></div>
                    <div><label>Guru Review</label><span id="final-guru-date">Scheduled</span></div>
                </div>
            </div>

            <div class="btn-nav">
                <button class="btn btn-secondary" onclick="showTab('action')">
                    <span class="icon icon-sm"><i data-lucide="arrow-left"></i></span>
                    Back to Action Plan
                </button>
                <button class="btn btn-yellow" onclick="if(confirm('Start new assessment? This will reset all data.')) location.reload();">
                    <span class="icon icon-sm"><i data-lucide="refresh-cw"></i></span>
                    Start New Assessment
                </button>
            </div>
        </div>
    </div>


    <script>
        // Initialize Lucide icons
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
            init();
        });

        // Data
        const DYSFUNCTIONS = [
            { id: 'trust', name: 'Absence of Trust', shortName: 'Trust' },
            { id: 'conflict', name: 'Fear of Conflict', shortName: 'Conflict' },
            { id: 'commitment', name: 'Lack of Commitment', shortName: 'Commit' },
            { id: 'accountability', name: 'Avoidance of Accountability', shortName: 'Account' },
            { id: 'results', name: 'Inattention to Results', shortName: 'Results' }
        ];

        const BRAIN_JUICE_ACTIONS = {
            trust: ['Share personal stories at meeting start (5 min)', 'Monthly team-building vulnerability exercises', 'Quarterly strengths/weaknesses disclosure', 'Weekly check-ins promoting openness'],
            conflict: ['Establish norms for healthy debate', 'Create safe space with "devils advocate" role', 'Encourage diverse viewpoints round-robin', 'Real-time conflict resolution training'],
            commitment: ['"Disagree and commit" protocol', 'Decision clarity rounds at meeting end', 'Written commitment documentation', 'Regular commitment reviews'],
            accountability: ['Clear performance expectations documented', 'Peer-to-peer accountability partners', 'Regular progress reviews in meetings', 'Constructive call-out culture'],
            results: ['Align individual with team goals quarterly', 'Shared success metrics dashboard', 'Celebrate collective achievements', '"We over me" recognition programs']
        };

        const EXAMPLE_DATA = {
            teamMembers: [
                { name: "John Peterson", role: "COO", ratings: { trust: 7, conflict: 6, commitment: 8, accountability: 7, results: 9 } },
                { name: "Sarah Chen", role: "CFO", ratings: { trust: 3, conflict: 4, commitment: 2, accountability: 5, results: 8 } },
                { name: "Mike Rodriguez", role: "CTO", ratings: { trust: 8, conflict: 7, commitment: 8, accountability: 9, results: 9 } },
                { name: "Lisa Kumar", role: "CMO", ratings: { trust: 6, conflict: 5, commitment: 7, accountability: 6, results: 7 } },
                { name: "Tom Anderson", role: "VP Sales", ratings: { trust: 7, conflict: 8, commitment: 6, accountability: 8, results: 9 } }
            ],
            ceoName: "Maria Santos",
            companyName: "TechCorp Manufacturing"
        };

        // State
        let teamMembers = [];
        let actions = [{}, {}, {}];
        let currentTab = 'reference';

        // Initialize
        function init() {
            for (let i = 0; i < 5; i++) {
                teamMembers.push({ name: '', role: '', ratings: { trust: 0, conflict: 0, commitment: 0, accountability: 0, results: 0 } });
            }
            renderTeamMembers();
            updateProgress();
            
            ['ceo-name', 'company-name', 'forum-date', 'team-share-date', 'guru-review-date', 'binding-commitment', 'signature'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.addEventListener('change', updateProgress);
                if (el) el.addEventListener('input', updateProgress);
            });
        }

        // Tab Navigation
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            
            document.getElementById(tabId).classList.add('active');
            
            // Find and activate the corresponding tab button
            const tabBtn = document.getElementById('tab-' + tabId);
            if (tabBtn) {
                tabBtn.classList.add('active');
            } else if (event && event.target) {
                const clickedTab = event.target.closest('.tab-btn');
                if (clickedTab) clickedTab.classList.add('active');
            }
            
            currentTab = tabId;
            
            if (tabId === 'action') renderActionTab();
            if (tabId === 'dashboard') renderDashboard();
            
            lucide.createIcons();
            window.scrollTo(0, 0);
        }

        // Helpers
        function getStatus(score) {
            if (score >= 7) return 'healthy';
            if (score >= 4) return 'moderate';
            return 'critical';
        }

        function getStatusLabel(score) {
            if (score >= 7) return 'HEALTHY';
            if (score >= 4) return 'NEEDS WORK';
            return 'CRITICAL';
        }

        function calcAverage(arr) {
            const valid = arr.filter(v => v > 0);
            return valid.length ? valid.reduce((a, b) => a + b, 0) / valid.length : 0;
        }

        // Team Members
        function renderTeamMembers() {
            const container = document.getElementById('team-members-container');
            container.innerHTML = teamMembers.map((member, i) => `
                <div class="team-member-card">
                    <div class="team-member-header">
                        <div class="member-number">${i + 1}</div>
                        <div class="member-inputs">
                            <input type="text" placeholder="Team member name (e.g., John Peterson)" value="${member.name}" onchange="updateMember(${i}, 'name', this.value)">
                            <input type="text" placeholder="Role (e.g., COO, CFO)" value="${member.role}" onchange="updateMember(${i}, 'role', this.value)">
                        </div>
                        ${isMemberComplete(member) ? '<span class="complete-badge"><i data-lucide="check" style="width:14px;height:14px;"></i> Complete</span>' : ''}
                    </div>
                    <div class="sliders-grid">
                        ${DYSFUNCTIONS.map(d => `
                            <div class="slider-container">
                                <div class="slider-label">
                                    <span>${d.shortName}</span>
                                    <span class="slider-score ${member.ratings[d.id] > 0 ? getStatus(member.ratings[d.id]) : ''}">${member.ratings[d.id] || '-'}</span>
                                </div>
                                <input type="range" min="1" max="9" value="${member.ratings[d.id] || 5}" oninput="updateRating(${i}, '${d.id}', this.value)">
                                <div class="slider-hint">${getSliderHint(member.ratings[d.id])}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
            
            document.getElementById('add-member-btn').innerHTML = `<span class="icon icon-sm"><i data-lucide="plus"></i></span> Add Team Member (${teamMembers.length}/8)`;
            document.getElementById('add-member-btn').disabled = teamMembers.length >= 8;
            lucide.createIcons();
        }

        function getSliderHint(score) {
            if (!score || score === 0) return '';
            if (score <= 3) return 'Critical - major dysfunction';
            if (score <= 6) return 'Moderate - needs attention';
            return 'Healthy - well functioning';
        }

        function isMemberComplete(member) {
            return member.name.trim() && Object.values(member.ratings).every(r => r > 0);
        }

        function updateMember(index, field, value) {
            teamMembers[index][field] = value;
            renderTeamMembers();
            updateProgress();
        }

        function updateRating(index, dysfunctionId, value) {
            teamMembers[index].ratings[dysfunctionId] = parseInt(value);
            renderTeamMembers();
            updateProgress();
        }

        function addTeamMember() {
            if (teamMembers.length < 8) {
                teamMembers.push({ name: '', role: '', ratings: { trust: 0, conflict: 0, commitment: 0, accountability: 0, results: 0 } });
                renderTeamMembers();
                updateProgress();
            }
        }

        // Progress
        function updateProgress() {
            const named = teamMembers.filter(m => m.name.trim()).length;
            const complete = teamMembers.filter(m => isMemberComplete(m)).length;
            const totalRatings = teamMembers.reduce((acc, m) => acc + Object.values(m.ratings).filter(r => r > 0).length, 0);
            const expectedRatings = named * 5;
            
            document.getElementById('named-count').textContent = `${named}/5+`;
            document.getElementById('ratings-count').textContent = `${totalRatings}/${expectedRatings || 0}`;
            document.getElementById('complete-count').textContent = `${complete}/${teamMembers.length}`;
            
            const tab2Complete = complete >= 5;
            document.getElementById('status-text').textContent = tab2Complete ? 'Ready' : 'In Progress';
            document.getElementById('status-text').style.color = tab2Complete ? 'var(--green)' : 'var(--amber)';
            
            const quickView = document.getElementById('quick-view');
            const quickItems = document.getElementById('quick-view-items');
            const averages = getTeamAverages();
            
            if (Object.values(averages).some(v => v > 0)) {
                quickView.style.display = 'flex';
                quickItems.innerHTML = DYSFUNCTIONS.map(d => 
                    averages[d.id] > 0 ? `
                        <div class="quick-view-item">
                            <span>${d.shortName}</span>
                            <span>${averages[d.id].toFixed(1)}</span>
                            <div class="traffic-light ${getStatus(averages[d.id])}"></div>
                        </div>
                    ` : ''
                ).join('');
            } else {
                quickView.style.display = 'none';
            }
            
            document.getElementById('tab-action').disabled = !tab2Complete;
            document.getElementById('tab-action').innerHTML = tab2Complete 
                ? '<span class="icon icon-sm"><i data-lucide="check-circle"></i></span> Action Plan'
                : '<span class="icon icon-sm"><i data-lucide="lock"></i></span> Action Plan';
            document.getElementById('continue-action-btn').disabled = !tab2Complete;
            
            const tab3Complete = checkTab3Complete();
            document.getElementById('tab-dashboard').disabled = !tab3Complete;
            document.getElementById('tab-dashboard').innerHTML = tab3Complete 
                ? '<span class="icon icon-sm"><i data-lucide="check-circle"></i></span> Dashboard'
                : '<span class="icon icon-sm"><i data-lucide="lock"></i></span> Dashboard';
            document.getElementById('view-dashboard-btn').disabled = !tab3Complete;
            
            const sap = calculateSAP();
            document.getElementById('sap-count').textContent = `${sap} SAP`;
            
            lucide.createIcons();
        }

        function getTeamAverages() {
            const averages = {};
            DYSFUNCTIONS.forEach(d => {
                const scores = teamMembers.filter(m => m.name && m.ratings[d.id] > 0).map(m => m.ratings[d.id]);
                averages[d.id] = scores.length ? calcAverage(scores) : 0;
            });
            return averages;
        }

        function checkTab3Complete() {
            // Only check actions that have been assigned a dysfunction (i.e., based on actual priorities)
            const assignedActions = actions.filter(a => a.dysfunctionId);
            const actionsComplete = assignedActions.length > 0 && assignedActions.every(a => a.action && a.owner && a.frequency && a.startDate && a.successMetric);
            const commitmentComplete = document.getElementById('binding-commitment')?.checked && document.getElementById('signature')?.value.trim();
            return actionsComplete && commitmentComplete;
        }

        function calculateSAP() {
            let sap = 0;
            const complete = teamMembers.filter(m => isMemberComplete(m)).length;
            if (complete >= 5) sap += 50;
            actions.forEach(a => {
                if (a.action && a.owner && a.frequency && a.startDate && a.successMetric) sap += 25;
            });
            if (document.getElementById('binding-commitment')?.checked && document.getElementById('signature')?.value.trim()) sap += 25;
            return sap;
        }

        // Action Tab
        function renderActionTab() {
            const averages = getTeamAverages();
            const priorities = DYSFUNCTIONS
                .map(d => ({ ...d, score: averages[d.id] }))
                .filter(d => d.score > 0)
                .sort((a, b) => a.score - b.score)
                .slice(0, 3);
            
            document.getElementById('priority-cards').innerHTML = priorities.map((p, i) => `
                <div class="priority-card ${getStatus(p.score)}">
                    <div class="priority-rank">#${i + 1}</div>
                    <div class="priority-name">${p.name}</div>
                    <div class="priority-score">${p.score.toFixed(1)}</div>
                    <div class="priority-status">${getStatusLabel(p.score)}</div>
                </div>
            `).join('') || '<p style="text-align:center; padding:40px; color:var(--grey-500); grid-column: 1/-1;">Complete assessment to see priorities</p>';
            
            const owners = teamMembers.filter(m => m.name).map(m => `${m.name} - ${m.role}`);
            const ceoName = document.getElementById('ceo-name')?.value || 'CEO';
            owners.unshift(`${ceoName} - CEO`);
            
            document.getElementById('action-cards-container').innerHTML = priorities.map((p, i) => {
                actions[i] = actions[i] || {};
                actions[i].dysfunctionId = p.id;
                return `
                    <div class="action-card">
                        <div class="action-card-header">
                            <span><strong>Action #${i + 1}:</strong> ${p.name}</span>
                            <span style="padding:4px 12px; border-radius:4px; font-size:11px; font-weight:600; background:${isActionComplete(i) ? 'var(--green)' : 'var(--grey-200)'}; color:${isActionComplete(i) ? 'white' : 'var(--grey-600)'};">
                                ${isActionComplete(i) ? 'Complete' : 'Incomplete'}
                            </span>
                        </div>
                        <div class="action-card-body">
                            <div class="action-hint">
                                <span class="icon icon-sm"><i data-lucide="book-open"></i></span>
                                <span><strong>BRAIN JUICE:</strong> Focus on ${p.name.toLowerCase()} by implementing proven strategies from your learning.</span>
                            </div>
                            
                            <div class="form-group">
                                <label>Your Specific Action</label>
                                <select onchange="updateAction(${i}, 'action', this.value)">
                                    <option value="">Select a Brain Juice recommended action...</option>
                                    ${BRAIN_JUICE_ACTIONS[p.id].map(opt => `<option value="${opt}" ${actions[i].action === opt ? 'selected' : ''}>${opt}</option>`).join('')}
                                </select>
                            </div>
                            
                            <div class="action-fields">
                                <div class="form-group">
                                    <label>Led by</label>
                                    <select onchange="updateAction(${i}, 'owner', this.value)">
                                        <option value="">Select owner...</option>
                                        ${owners.map(o => `<option value="${o}" ${actions[i].owner === o ? 'selected' : ''}>${o}</option>`).join('')}
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Frequency</label>
                                    <select onchange="updateAction(${i}, 'frequency', this.value)">
                                        <option value="">Select...</option>
                                        <option value="daily" ${actions[i].frequency === 'daily' ? 'selected' : ''}>Daily</option>
                                        <option value="weekly" ${actions[i].frequency === 'weekly' ? 'selected' : ''}>Weekly</option>
                                        <option value="bi-weekly" ${actions[i].frequency === 'bi-weekly' ? 'selected' : ''}>Bi-weekly</option>
                                        <option value="monthly" ${actions[i].frequency === 'monthly' ? 'selected' : ''}>Monthly</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Starting</label>
                                    <input type="date" value="${actions[i].startDate || ''}" onchange="updateAction(${i}, 'startDate', this.value)">
                                </div>
                            </div>
                            
                            <div class="form-group" style="margin-bottom:0;">
                                <label>Success Metric</label>
                                <textarea placeholder="e.g., Team vulnerability index increases from 3.2 to 6.0 within 90 days" onchange="updateAction(${i}, 'successMetric', this.value)">${actions[i].successMetric || ''}</textarea>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            if (actions[0]?.startDate) {
                document.getElementById('first-action-date').textContent = actions[0].startDate;
            }
            
            // Update action progress dots and show/hide commitment section
            const numPriorities = priorities.length;
            const completedActions = [0, 1, 2].slice(0, numPriorities).filter(i => isActionComplete(i)).length;
            const dots = document.querySelectorAll('.action-dot');
            dots.forEach((dot, i) => {
                if (i < numPriorities) {
                    dot.style.display = 'inline-block';
                    dot.classList.toggle('complete', isActionComplete(i));
                } else {
                    dot.style.display = 'none';
                }
            });
            
            const commitmentSection = document.getElementById('commitment-section');
            const incompleteMsg = document.getElementById('actions-incomplete-msg');
            
            // Show commitment section when all available actions are complete (or if no priorities)
            const allActionsComplete = numPriorities > 0 && completedActions >= numPriorities;
            
            if (allActionsComplete) {
                commitmentSection.style.display = 'block';
                incompleteMsg.style.display = 'none';
                // Scroll to commitment section smoothly (only if it just became visible)
                if (!commitmentSection.dataset.shown) {
                    commitmentSection.dataset.shown = 'true';
                    setTimeout(() => {
                        commitmentSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }, 100);
                }
            } else if (numPriorities === 0) {
                commitmentSection.dataset.shown = '';  // Reset for next time
                // No assessment data yet
                commitmentSection.style.display = 'none';
                incompleteMsg.innerHTML = `
                    <span class="icon icon-lg" style="color: var(--grey-400); margin-bottom: 16px;"><i data-lucide="alert-circle"></i></span>
                    <h4 style="margin-bottom: 8px; color: var(--grey-600);">Complete Your Assessment First</h4>
                    <p style="color: var(--grey-500); margin-bottom: 0;">Go back to the Assessment tab and rate your team members</p>
                `;
                incompleteMsg.style.display = 'block';
            } else {
                commitmentSection.style.display = 'none';
                commitmentSection.dataset.shown = '';  // Reset for next time
                incompleteMsg.innerHTML = `
                    <span class="icon icon-lg" style="color: var(--grey-400); margin-bottom: 16px;"><i data-lucide="clipboard-list"></i></span>
                    <h4 style="margin-bottom: 8px; color: var(--grey-600);">Complete Your Action Plans</h4>
                    <p style="color: var(--grey-500); margin-bottom: 0;">Fill out all ${numPriorities} action card${numPriorities > 1 ? 's' : ''} above to unlock the commitment section</p>
                    <div style="margin-top: 16px; display: flex; gap: 8px; justify-content: center;">
                        ${[0,1,2].slice(0, numPriorities).map(i => `<span class="action-dot ${isActionComplete(i) ? 'complete' : ''}"></span>`).join('')}
                    </div>
                `;
                incompleteMsg.style.display = 'block';
            }
            
            lucide.createIcons();
        }

        function isActionComplete(index) {
            const a = actions[index];
            return a && a.action && a.owner && a.frequency && a.startDate && a.successMetric;
        }

        function updateAction(index, field, value) {
            actions[index][field] = value;
            if (field === 'startDate' && index === 0) {
                document.getElementById('first-action-date').textContent = value || '[set date above]';
            }
            renderActionTab();
            updateProgress();
        }

        // Dashboard
        function renderDashboard() {
            const averages = getTeamAverages();
            const overallScore = calcAverage(Object.values(averages).filter(v => v > 0));
            const criticalCount = DYSFUNCTIONS.filter(d => averages[d.id] > 0 && averages[d.id] < 4).length;
            const sap = calculateSAP();
            const actionsCount = actions.filter(a => isActionComplete(actions.indexOf(a))).length;
            
            document.getElementById('overall-score').textContent = overallScore.toFixed(1);
            document.getElementById('critical-count').textContent = criticalCount;
            document.getElementById('critical-icon-wrap').style.color = criticalCount > 0 ? 'var(--red)' : 'var(--green)';
            document.getElementById('actions-count').textContent = actionsCount;
            document.getElementById('sap-earned').textContent = `+${sap}`;
            
            const masteryLevel = sap < 200 ? 'NOVICE' : sap < 500 ? 'PRACTITIONER' : 'MASTER';
            const nextLevelSAP = masteryLevel === 'NOVICE' ? 200 : 500;
            const progress = Math.min((sap / nextLevelSAP) * 100, 100);
            
            document.getElementById('mastery-level').textContent = masteryLevel;
            document.getElementById('mastery-sap').textContent = sap;
            document.getElementById('mastery-progress').style.width = `${progress}%`;
            document.getElementById('mastery-next').textContent = `${nextLevelSAP - sap} more SAP needed for ${masteryLevel === 'NOVICE' ? 'PRACTITIONER' : 'MASTER'} level`;
            
            const heatMapBody = document.getElementById('heat-map-body');
            heatMapBody.innerHTML = teamMembers.filter(m => m.name).map(m => `
                <tr>
                    <td>${m.name}</td>
                    <td>${m.role}</td>
                    ${DYSFUNCTIONS.map(d => `<td><span class="heat-cell ${getStatus(m.ratings[d.id])}">${m.ratings[d.id] || '-'}</span></td>`).join('')}
                </tr>
            `).join('') + `
                <tr>
                    <td colspan="2">Team Average</td>
                    ${DYSFUNCTIONS.map(d => `<td><span class="heat-cell ${getStatus(averages[d.id])}">${averages[d.id] ? averages[d.id].toFixed(1) : '-'}</span></td>`).join('')}
                </tr>
            `;
            
            document.getElementById('chart-bars').innerHTML = DYSFUNCTIONS.filter(d => averages[d.id] > 0).map(d => `
                <div class="chart-bar-item">
                    <div class="chart-bar-label">${d.shortName}</div>
                    <div class="chart-bar-track">
                        <div class="chart-bar-fill ${getStatus(averages[d.id])}" style="width: ${(averages[d.id] / 9) * 100}%">${averages[d.id].toFixed(1)}</div>
                    </div>
                </div>
            `).join('');
            
            const tracker = document.getElementById('action-tracker');
            tracker.innerHTML = `
                <div class="action-tracker-row">
                    <div>Dysfunction</div>
                    <div>Action</div>
                    <div>Owner</div>
                    <div>Start</div>
                    <div>Status</div>
                </div>
            ` + actions.filter(a => a.action).map(a => {
                const dysfunction = DYSFUNCTIONS.find(d => d.id === a.dysfunctionId);
                return `
                    <div class="action-tracker-row">
                        <div>${dysfunction?.shortName || '-'}</div>
                        <div style="overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">${a.action}</div>
                        <div>${a.owner?.split(' - ')[0] || '-'}</div>
                        <div>${a.startDate || '-'}</div>
                        <div><span class="status-badge">Not Started</span></div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('final-forum-date').textContent = document.getElementById('forum-date')?.value || 'Not set';
            document.getElementById('final-team-date').textContent = document.getElementById('team-share-date')?.value || 'Not set';
            document.getElementById('final-guru-date').textContent = document.getElementById('guru-review-date')?.value || 'Scheduled';
            
            lucide.createIcons();
        }

        // Load Example
        function loadExample() {
            teamMembers = EXAMPLE_DATA.teamMembers.map(m => ({ ...m }));
            document.getElementById('ceo-name').value = EXAMPLE_DATA.ceoName;
            document.getElementById('company-name').value = EXAMPLE_DATA.companyName;
            renderTeamMembers();
            updateProgress();
        }
        
        function loadExampleAndHide() {
            loadExample();
            hideExamplePrompt();
            // Scroll to first team member card
            const firstCard = document.querySelector('.team-member-card');
            if (firstCard) {
                setTimeout(() => {
                    firstCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 100);
            }
        }
        
        function hideExamplePrompt() {
            const prompt = document.getElementById('example-prompt');
            if (prompt) {
                prompt.style.transition = 'all 0.3s ease';
                prompt.style.opacity = '0';
                prompt.style.transform = 'translateY(-10px)';
                setTimeout(() => {
                    prompt.style.display = 'none';
                }, 300);
            }
        }

        // Copy Link
        function copyLink() {
            const data = { teamMembers, actions };
            const encoded = btoa(JSON.stringify(data));
            navigator.clipboard.writeText(`${window.location.href}#data=${encoded}`).then(() => {
                alert('Assessment link copied! Share with your Guru or Forum peers.');
            });
        }
    </script>
</body>
</html>

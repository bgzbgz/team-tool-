<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fast Track - Team Dysfunction Assessment | Sprint 5 of 32</title>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <style>
        @font-face {
            font-family: 'Plaak';
            src: url('Plaak3Trial-43-Bold.otf') format('opentype');
            font-weight: 700;
            font-style: normal;
            font-display: swap;
        }
        
        @font-face {
            font-family: 'Riforma';
            src: url('RiformaLL-Regular.otf') format('opentype');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }
        
        :root {
            --black: #000000;
            --white: #FFFFFF;
            --grey-50: #F9FAFB;
            --grey-100: #F3F4F6;
            --grey-200: #E5E7EB;
            --grey-300: #D1D5DB;
            --grey-400: #9CA3AF;
            --grey-500: #6B7280;
            --grey-600: #4B5563;
            --grey-700: #374151;
            --grey-800: #1F2937;
            --grey-900: #111827;
            --yellow-50: #fffef5;
            --yellow-100: #fffde6;
            --yellow-200: #fffacc;
            --yellow-300: #fff7a3;
            --yellow-400: #fff469;
            --yellow-500: #f0e55a;
            --yellow-600: #d4c94f;
            --yellow-700: #a89e3e;
            --green: #10B981;
            --amber: #F59E0B;
            --red: #EF4444;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Riforma', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--white);
            color: var(--black);
            line-height: 1.7;
            font-size: 14px;
        }
        
        h1, h2, h3, h4, .heading {
            font-family: 'Plaak', Arial, sans-serif;
            font-weight: 700;
            line-height: 1.3;
        }
        
        h1 { font-size: 36px; }
        h2 { font-size: 28px; }
        h3 { font-size: 20px; letter-spacing: -0.01em; }
        h4 { font-size: 16px; }
        
        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 32px 24px;
        }
        
        /* Icons */
        .icon { display: inline-flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .icon svg { stroke-width: 2; }
        .icon-sm svg { width: 16px; height: 16px; }
        .icon-md svg { width: 20px; height: 20px; }
        .icon-lg svg { width: 24px; height: 24px; }
        
        /* Header */
        .header {
            background: var(--black);
            color: var(--white);
            padding: 12px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            max-width: 960px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 24px;
        }
        
        .sprint-badge {
            font-size: 13px;
            color: var(--grey-400);
        }
        
        .sprint-badge strong {
            color: var(--yellow-400);
        }
        
        .sap-display {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            font-weight: 600;
        }
        
        .sap-display .icon { color: var(--yellow-400); }
        
        .logo {
            background: var(--white);
            padding: 8px 12px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .logo img {
            height: 28px;
            width: auto;
            display: block;
        }
        
        /* Tabs */
        .tabs-nav {
            display: flex;
            gap: 0;
            border-bottom: 1px solid var(--grey-200);
            margin-bottom: 40px;
        }
        
        .tab-btn {
            padding: 16px 24px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-family: 'Riforma', sans-serif;
            font-weight: 400;
            font-size: 14px;
            color: var(--grey-500);
            transition: color 0.2s;
            border-bottom: 3px solid transparent;
            margin-bottom: -1px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tab-btn:hover:not(:disabled) {
            color: var(--grey-700);
        }
        
        .tab-btn.active {
            color: var(--black);
            border-bottom-color: var(--yellow-400);
        }
        
        .tab-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        
        .tab-btn .icon { color: inherit; }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Cards */
        .card {
            background: var(--white);
            border: 1px solid var(--grey-200);
            border-radius: 4px;
            padding: 32px;
            margin-bottom: 32px;
        }
        
        .card-yellow {
            border-color: var(--yellow-300);
            background: var(--yellow-50);
        }
        
        .card h3 {
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card h3 .icon { color: var(--grey-600); }
        
        /* Hero */
        .hero {
            background: var(--black);
            color: var(--white);
            padding: 48px;
            border-radius: 4px;
            margin-bottom: 40px;
        }
        
        .hero-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }
        
        .hero-header .icon { color: var(--yellow-400); }
        
        .hero h1 { font-size: 32px; margin-bottom: 8px; }
        .hero-subtitle { color: var(--grey-400); font-size: 14px; margin-bottom: 20px; }
        .hero p { color: var(--grey-300); font-size: 15px; max-width: 560px; line-height: 1.7; }
        
        /* Scope Grid */
        .scope-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 24px;
        }
        
        .scope-item {
            display: flex;
            align-items: flex-start;
            gap: 16px;
        }
        
        .scope-icon {
            width: 40px;
            height: 40px;
            background: var(--grey-100);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            color: var(--grey-600);
        }
        
        .scope-item h4 {
            font-size: 11px;
            color: var(--grey-500);
            margin-bottom: 4px;
            font-family: 'Riforma', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 400;
        }
        
        .scope-item p { font-weight: 500; color: var(--grey-800); font-size: 14px; }
        
        /* Warning */
        .warning-card {
            background: var(--white);
            border: 1px solid var(--yellow-300);
            border-left: 3px solid var(--yellow-400);
            border-radius: 4px;
            padding: 24px 32px;
            margin-bottom: 32px;
        }
        
        .warning-card h4 {
            color: var(--grey-800);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 20px;
        }
        
        .warning-card h4 .icon { color: var(--yellow-600); }
        
        .warning-card ul { margin-left: 28px; color: var(--grey-600); }
        .warning-card li { margin-bottom: 8px; }
        
        /* Key Learnings */
        .key-learning {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            padding: 16px 0;
            border-bottom: 1px solid var(--grey-100);
        }
        
        .key-learning:last-child { border-bottom: none; }
        
        .check-circle {
            width: 20px;
            height: 20px;
            color: var(--green);
            flex-shrink: 0;
            margin-top: 2px;
        }
        
        .key-learning span { color: var(--grey-700); }
        
        /* Buttons */
        .btn {
            padding: 12px 24px;
            border: 1px solid transparent;
            border-radius: 4px;
            font-family: 'Riforma', sans-serif;
            font-weight: 400;
            cursor: pointer;
            transition: opacity 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }
        
        .btn:hover:not(:disabled) { opacity: 0.8; }
        
        .btn-primary { 
            background: var(--black); 
            color: var(--white); 
            border-color: var(--black);
        }
        
        .btn-secondary { 
            background: var(--white); 
            color: var(--black); 
            border-color: var(--black);
        }
        
        .btn-yellow { 
            background: var(--yellow-400); 
            color: var(--black);
            border-color: var(--yellow-400);
        }
        
        .btn:disabled { opacity: 0.4; cursor: not-allowed; }
        
        .btn-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 32px;
            border-top: 1px solid var(--grey-200);
            gap: 16px;
        }
        
        /* Forms */
        input, select, textarea {
            font-family: 'Riforma', sans-serif;
            font-size: 14px;
            padding: 12px 16px;
            border: 1px solid var(--grey-300);
            border-radius: 4px;
            width: 100%;
            transition: border-color 0.2s;
            background: var(--white);
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--grey-500);
        }
        
        label {
            display: block;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--grey-700);
            font-size: 13px;
        }
        
        .form-group { margin-bottom: 20px; }
        
        /* Statement Card */
        .statement-card {
            background: var(--white);
            border: 1px solid var(--grey-200);
            border-radius: 4px;
            padding: 28px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        
        .statement-card.completed {
            border-color: var(--green);
            background: var(--grey-50);
        }
        
        .statement-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .statement-number {
            width: 40px;
            height: 40px;
            background: var(--yellow-400);
            color: var(--black);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
            flex-shrink: 0;
            flex-shrink: 0;
        }
        
        .statement-dysfunction-badge {
            padding: 4px 10px;
            background: var(--grey-100);
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            color: var(--grey-600);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .statement-text {
            font-size: 15px;
            line-height: 1.7;
            color: var(--grey-800);
            margin-bottom: 16px;
            font-weight: 500;
        }
        
        .statement-hint {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: var(--yellow-50);
            border-radius: 4px;
            font-size: 13px;
            color: var(--grey-600);
            margin-bottom: 20px;
        }
        
        .statement-hint .icon { color: var(--yellow-600); }
        
        .rating-buttons {
            display: flex;
            gap: 12px;
        }
        
        /* ================================================
           TYPEFORM-STYLE ASSESSMENT SLIDES
           ================================================ */
        
        .assessment-fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--white);
            z-index: 1000;
            overflow-y: auto;
        }
        
        .assessment-slide {
            min-height: 100vh;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 100px 24px 60px;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .assessment-slide.active {
            display: flex;
        }
        
        .slide-progress-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 20px 24px;
            border-bottom: 1px solid var(--grey-200);
            z-index: 1001;
        }
        
        .slide-progress-inner {
            max-width: 700px;
            margin: 0 auto;
        }
        
        .slide-progress-text {
            font-size: 14px;
            color: var(--grey-500);
            text-align: center;
            margin-bottom: 12px;
        }
        
        .slide-progress-bar {
            height: 6px;
            background: var(--grey-200);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .slide-progress-fill {
            height: 100%;
            background: var(--yellow-400);
            transition: width 0.4s ease;
            border-radius: 3px;
        }
        
        .question-number-badge {
            width: 56px;
            height: 56px;
            background: var(--yellow-400);
            color: var(--black);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 24px;
            font-family: 'Plaak', sans-serif;
            margin-bottom: 32px;
        }
        
        .question-primary {
            font-size: 32px;
            font-weight: 700;
            color: var(--black);
            text-align: center;
            margin-bottom: 16px;
            line-height: 1.3;
            font-family: 'Plaak', sans-serif;
        }
        
        .question-context {
            font-size: 16px;
            color: var(--grey-500);
            text-align: center;
            margin-bottom: 48px;
            max-width: 560px;
            line-height: 1.6;
        }
        
        .answer-buttons {
            display: flex;
            flex-direction: column;
            gap: 16px;
            width: 100%;
            max-width: 400px;
        }
        
        .answer-btn {
            padding: 22px 32px;
            border: 2px solid var(--grey-300);
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 18px;
            font-weight: 600;
            font-family: inherit;
            color: var(--grey-700);
        }
        
        .answer-btn:hover {
            border-color: var(--black);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .answer-btn.selected {
            border-color: var(--yellow-400);
            background: var(--yellow-50);
            color: var(--black);
        }
        
        .answer-btn.selected-good {
            border-color: var(--green);
            background: var(--green);
            color: white;
        }
        
        .answer-btn.selected-moderate {
            border-color: var(--amber);
            background: var(--amber);
            color: white;
        }
        
        .answer-btn.selected-bad {
            border-color: var(--red);
            background: var(--red);
            color: white;
        }
        
        .slide-nav {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 400px;
            margin-top: 48px;
        }
        
        .btn-text-nav {
            background: none;
            border: none;
            color: var(--grey-500);
            font-size: 14px;
            cursor: pointer;
            padding: 12px 16px;
            font-family: inherit;
            transition: color 0.2s;
        }
        
        .btn-text-nav:hover:not(:disabled) {
            color: var(--black);
        }
        
        .btn-text-nav:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        
        /* Intro slide */
        .intro-slide .form-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }
        
        .intro-slide input {
            font-size: 18px;
            padding: 16px 20px;
            text-align: center;
        }
        
        .intro-slide .btn-start {
            margin-top: 32px;
            padding: 18px 48px;
            font-size: 18px;
        }
        
        /* Results slide */
        .results-slide {
            padding-top: 40px;
            padding-bottom: 60px;
        }
        
        .results-hero {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .results-hero .check-icon {
            width: 80px;
            height: 80px;
            background: var(--green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
        }
        
        .results-hero .check-icon svg {
            width: 40px;
            height: 40px;
            color: white;
        }
        
        .results-hero h1 {
            font-size: 36px;
            margin-bottom: 12px;
        }
        
        .results-hero p {
            color: var(--grey-600);
            font-size: 16px;
        }
        
        .sap-earned-card {
            background: var(--yellow-400);
            border-radius: 8px;
            padding: 20px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            width: 100%;
            max-width: 500px;
        }
        
        .sap-earned-card span {
            font-size: 14px;
            font-weight: 500;
        }
        
        .sap-earned-card strong {
            font-size: 32px;
            font-family: 'Plaak', sans-serif;
        }
        
        .priorities-simple {
            display: flex;
            flex-direction: column;
            gap: 16px;
            width: 100%;
            max-width: 500px;
            margin-bottom: 32px;
        }
        
        .priority-box {
            background: var(--white);
            border-radius: 8px;
            padding: 24px;
            border-left: 4px solid var(--grey-300);
        }
        
        .priority-box.critical {
            border-left-color: var(--red);
            background: #fef2f2;
        }
        
        .priority-box.moderate {
            border-left-color: var(--amber);
            background: #fffbeb;
        }
        
        .priority-box.healthy {
            border-left-color: var(--green);
            background: #ecfdf5;
        }
        
        .priority-label {
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--grey-500);
            margin-bottom: 8px;
        }
        
        .priority-box h3 {
            font-size: 18px;
            margin-bottom: 6px;
        }
        
        .priority-score {
            font-size: 14px;
            font-weight: 700;
            color: var(--grey-600);
            margin-bottom: 8px;
        }
        
        .priority-insight {
            font-size: 13px;
            color: var(--grey-600);
            margin: 0;
        }
        
        .key-insight-box {
            background: var(--yellow-50);
            border: 1px solid var(--yellow-300);
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
            width: 100%;
            max-width: 500px;
        }
        
        .key-insight-box h4 {
            font-size: 16px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .key-insight-box p {
            font-size: 14px;
            color: var(--grey-700);
            line-height: 1.7;
            margin: 0;
        }
        
        .next-steps-box {
            background: var(--grey-50);
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 32px;
            width: 100%;
            max-width: 500px;
        }
        
        .next-steps-box h4 {
            font-size: 16px;
            margin-bottom: 16px;
        }
        
        .next-steps-box ol {
            margin: 0;
            padding-left: 20px;
            color: var(--grey-700);
            font-size: 14px;
            line-height: 2;
        }
        
        .results-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
            max-width: 500px;
        }
        
        .results-actions .btn {
            width: 100%;
            padding: 18px 24px;
            font-size: 16px;
        }
        
        /* Keyboard hint */
        .keyboard-hint {
            font-size: 12px;
            color: var(--grey-400);
            text-align: center;
            margin-top: 24px;
        }
        
        @media (max-width: 640px) {
            .question-primary {
                font-size: 24px;
            }
            
            .question-context {
                font-size: 14px;
            }
            
            .answer-btn {
                padding: 18px 24px;
                font-size: 16px;
            }
            
            .question-number-badge {
                width: 48px;
                height: 48px;
                font-size: 20px;
            }
        }
        
        /* Dysfunction Score Card (Scores Tab) */
        .dysfunction-score-card {
            background: var(--white);
            border: 1px solid var(--grey-200);
            border-radius: 4px;
            padding: 32px;
            margin-bottom: 20px;
        }
        
        .dysfunction-score-card.critical { border-left: 4px solid var(--red); }
        .dysfunction-score-card.moderate { border-left: 4px solid var(--amber); }
        .dysfunction-score-card.healthy { border-left: 4px solid var(--green); }
        
        .dysfunction-score-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .priority-badge {
            background: var(--yellow-400);
            color: var(--black);
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .status-badge-lg {
            padding: 6px 14px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: white;
        }
        
        .status-badge-lg.critical { background: var(--red); }
        .status-badge-lg.moderate { background: var(--amber); }
        .status-badge-lg.healthy { background: var(--green); }
        
        .score-display {
            display: flex;
            align-items: baseline;
            gap: 4px;
            margin: 24px 0;
        }
        
        .score-value { font-size: 64px; font-weight: 900; font-family: 'Plaak', sans-serif; line-height: 1; }
        .score-max { font-size: 32px; color: var(--grey-400); font-weight: 600; }
        
        .score-breakdown {
            background: var(--grey-50);
            border-radius: 4px;
            padding: 20px;
            margin-top: 24px;
        }
        
        .score-breakdown h5 {
            font-size: 12px;
            color: var(--grey-600);
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-family: 'Riforma', sans-serif;
            font-weight: 400;
        }
        
        .statement-score-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--grey-200);
            font-size: 13px;
        }
        
        .statement-score-item:last-child { border-bottom: none; }
        .statement-score-item .rating-good { color: var(--green); font-weight: 600; }
        .statement-score-item .rating-moderate { color: var(--amber); font-weight: 600; }
        .statement-score-item .rating-bad { color: var(--red); font-weight: 600; }
        
        .action-preview {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--grey-200);
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--grey-600);
            font-size: 13px;
        }
        
        .action-preview .icon { color: var(--yellow-600); }
        
        /* Complete badge */
        .complete-badge {
            background: var(--green);
            color: white;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        /* Progress */
        .progress-summary {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1px;
            background: var(--grey-200);
            border: 1px solid var(--grey-200);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 24px;
        }
        
        .progress-item {
            text-align: center;
            padding: 20px 16px;
            background: var(--white);
        }
        
        .progress-item h4 {
            font-size: 11px;
            color: var(--grey-500);
            margin-bottom: 6px;
            font-family: 'Riforma', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 400;
        }
        
        .progress-item .value { font-size: 22px; font-weight: 700; }
        
        /* Quick View */
        .quick-view {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            padding: 16px 20px;
            background: var(--grey-900);
            border-radius: 4px;
            margin-top: 20px;
        }
        
        .quick-view-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--white);
            font-size: 13px;
        }
        
        .traffic-light {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }
        
        .traffic-light.healthy { background: var(--green); }
        .traffic-light.moderate { background: var(--amber); }
        .traffic-light.critical { background: var(--red); }
        
        /* Brain Juice Box */
        .brain-juice-box {
            background: var(--white);
            border: 1px solid var(--grey-200);
            border-radius: 4px;
            padding: 28px;
            margin-bottom: 32px;
        }
        
        .brain-juice-box h4 {
            color: var(--grey-800);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 20px;
        }
        
        .brain-juice-box h4 .icon { color: var(--yellow-600); }
        
        .brain-juice-questions {
            display: grid;
            gap: 12px;
        }
        
        .brain-juice-question {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px 16px;
            background: var(--grey-50);
            border-radius: 4px;
            font-size: 13px;
        }
        
        .brain-juice-question strong {
            color: var(--grey-800);
            min-width: 90px;
            flex-shrink: 0;
            font-size: 12px;
        }
        
        .brain-juice-question span { color: var(--grey-600); }
        
        /* Priority Cards */
        .priority-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 8px;
        }
        
        .priority-card {
            padding: 24px;
            border-radius: 4px;
            text-align: center;
            color: white;
        }
        
        .priority-card.critical { background: var(--red); }
        .priority-card.moderate { background: var(--amber); }
        .priority-card.healthy { background: var(--green); }
        
        .priority-rank { font-size: 36px; font-weight: 900; opacity: 0.3; line-height: 1; }
        .priority-name { font-family: 'Plaak', sans-serif; font-size: 12px; margin: 8px 0; text-transform: uppercase; letter-spacing: 0.02em; }
        .priority-score { font-size: 22px; font-weight: 700; }
        .priority-status { font-size: 10px; text-transform: uppercase; letter-spacing: 0.1em; opacity: 0.9; margin-top: 4px; }
        
        /* Action Card */
        .action-card {
            background: var(--white);
            border: 1px solid var(--grey-200);
            border-radius: 4px;
            margin-bottom: 24px;
            overflow: hidden;
        }
        
        .action-card-header {
            background: var(--grey-50);
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--grey-200);
            gap: 12px;
        }
        
        .action-card-header span:first-child { font-size: 14px; }
        
        .action-card-body { padding: 28px; }
        
        .action-hint {
            background: var(--grey-50);
            border-radius: 4px;
            padding: 16px 20px;
            margin-bottom: 24px;
            font-size: 13px;
            color: var(--grey-600);
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }
        
        .action-hint .icon { color: var(--yellow-600); flex-shrink: 0; margin-top: 1px; }
        
        .action-fields {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }
        
        /* Action Progress Dots */
        .action-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--grey-300);
            transition: all 0.3s ease;
        }
        
        .action-dot.complete {
            background: var(--green);
        }
        
        /* Commitment */
        .commitment-section {
            background: var(--white);
            border: 1px solid var(--yellow-300);
            border-radius: 4px;
            padding: 32px;
            margin: 40px 0;
            animation: fadeSlideIn 0.5s ease-out;
        }
        
        @keyframes fadeSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .commitment-section h3 { 
            margin-bottom: 24px; 
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .commitment-section h3 .icon { color: var(--yellow-600); }
        
        .commitment-text {
            font-size: 15px;
            line-height: 2.4;
            margin-bottom: 28px;
            color: var(--grey-800);
        }
        
        .commitment-text input {
            border: none;
            border-bottom: 2px solid var(--black);
            background: transparent;
            width: auto;
            min-width: 160px;
            text-align: center;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 0;
        }
        
        .commitment-checkboxes { margin: 24px 0; }
        
        .checkbox-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 14px;
            font-size: 14px;
            color: var(--grey-700);
        }
        
        .checkbox-item .icon { color: var(--green); flex-shrink: 0; margin-top: 2px; }
        
        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin-top: 2px;
            flex-shrink: 0;
        }
        
        .checkbox-item input[type="date"] {
            width: auto;
            margin-left: 8px;
            padding: 6px 10px;
        }
        
        .forum-peers {
            background: var(--grey-50);
            border-radius: 4px;
            padding: 20px;
            margin-top: 24px;
        }
        
        .forum-peers h5 {
            font-size: 12px;
            color: var(--grey-600);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .forum-peers h5 .icon { color: var(--grey-500); }
        
        .peers-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 8px;
        }
        
        .peer-item {
            font-size: 13px;
            color: var(--grey-600);
            padding: 8px 12px;
            background: var(--white);
            border-radius: 4px;
        }
        
        .guru-note {
            margin-top: 20px;
            padding: 14px 16px;
            background: var(--white);
            border-radius: 4px;
            font-size: 13px;
            color: var(--grey-600);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .guru-note .icon { color: var(--grey-500); }
        
        .signature-field {
            margin-top: 28px;
            padding-top: 28px;
            border-top: 1px solid var(--grey-200);
        }
        
        .signature-field label {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .signature-field label .icon { color: var(--grey-500); }
        
        .signature-field input {
            font-family: 'Georgia', serif;
            font-size: 20px;
            font-style: italic;
            padding: 16px;
            border: 1px dashed var(--grey-400);
            text-align: center;
            margin-top: 8px;
        }
        
        /* Dashboard */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1px;
            background: var(--grey-200);
            border: 1px solid var(--grey-200);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 32px;
        }
        
        .stat-card {
            background: var(--white);
            padding: 24px 20px;
            text-align: center;
        }
        
        .stat-card .icon-wrap {
            width: 40px;
            height: 40px;
            margin: 0 auto 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--grey-600);
        }
        
        .stat-card .icon-wrap.yellow { color: var(--yellow-600); }
        
        .stat-card .value { font-size: 28px; font-weight: 700; font-family: 'Plaak', sans-serif; }
        .stat-card .label { font-size: 12px; color: var(--grey-500); margin-top: 4px; }
        
        /* Mastery */
        .mastery-card {
            background: var(--yellow-400);
            border-radius: 4px;
            padding: 28px;
            margin-bottom: 32px;
            color: var(--black);
        }
        
        .mastery-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            gap: 16px;
        }
        
        .mastery-level { font-size: 12px; text-transform: uppercase; letter-spacing: 0.1em; }
        .mastery-level span { font-family: 'Plaak', sans-serif; font-size: 22px; display: block; margin-top: 4px; }
        .mastery-sap { text-align: right; }
        .mastery-sap .value { font-size: 26px; font-weight: 700; }
        .mastery-sap .label { font-size: 12px; opacity: 0.7; }
        
        .progress-bar {
            height: 6px;
            background: rgba(0,0,0,0.15);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-bar-fill {
            height: 100%;
            background: var(--black);
            border-radius: 3px;
            transition: width 0.5s ease;
        }
        
        .mastery-next { margin-top: 12px; font-size: 13px; opacity: 0.7; }
        
        /* Heat Map */
        .heat-map { overflow-x: auto; }
        
        .heat-map table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }
        
        .heat-map th, .heat-map td {
            padding: 12px 10px;
            text-align: center;
            border-bottom: 1px solid var(--grey-200);
        }
        
        .heat-map th { 
            font-weight: 600; 
            color: var(--grey-600);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .heat-map th:first-child, .heat-map td:first-child { text-align: left; }
        .heat-map tr:last-child td { border-bottom: none; font-weight: 600; }
        
        .heat-cell {
            display: inline-block;
            min-width: 36px;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
            font-size: 13px;
            color: white;
        }
        
        .heat-cell.healthy { background: var(--green); }
        .heat-cell.moderate { background: var(--amber); }
        .heat-cell.critical { background: var(--red); }
        
        /* Action Tracker */
        .action-tracker-row {
            display: grid;
            grid-template-columns: 100px 1fr 120px 90px 90px;
            gap: 12px;
            padding: 14px 0;
            border-bottom: 1px solid var(--grey-100);
            align-items: center;
            font-size: 13px;
        }
        
        .action-tracker-row:first-child {
            font-weight: 600;
            color: var(--grey-600);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding-bottom: 12px;
        }
        
        .action-tracker-row:last-child { border-bottom: none; }
        
        .status-badge {
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-align: center;
            background: var(--amber);
            color: white;
        }
        
        /* Reflection */
        .reflection-section {
            background: var(--white);
            border: 1px solid var(--grey-200);
            border-radius: 4px;
            padding: 32px;
            margin: 32px 0;
        }
        
        .reflection-section h3 { 
            margin-bottom: 8px; 
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .reflection-section h3 .icon { color: var(--grey-600); }
        
        .reflection-section > p { color: var(--grey-500); margin-bottom: 24px; font-size: 13px; }
        
        .reflection-question { margin-bottom: 24px; }
        .reflection-question:last-child { margin-bottom: 0; }
        .reflection-question textarea { min-height: 80px; resize: vertical; }
        
        /* Sprint Complete */
        .sprint-complete-card {
            background: var(--green);
            color: white;
            border-radius: 4px;
            padding: 28px;
            margin-bottom: 32px;
        }
        
        .sprint-complete-card h3 { 
            margin-bottom: 8px; 
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .sprint-complete-card p { opacity: 0.9; font-size: 14px; }
        
        .sprint-complete-dates {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.3);
        }
        
        .sprint-complete-dates div { text-align: center; }
        .sprint-complete-dates label { display: block; font-size: 11px; opacity: 0.7; margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.05em; }
        .sprint-complete-dates span { font-weight: 700; font-size: 14px; }
        
        /* Sprint Context */
        .sprint-context {
            background: linear-gradient(135deg, var(--grey-900) 0%, #1a2e1a 100%);
            color: var(--white);
            border-radius: 8px;
            padding: 48px 40px;
            margin-bottom: 32px;
            text-align: center;
            border: 2px solid var(--green);
            position: relative;
            overflow: hidden;
        }
        
        .sprint-context::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--green);
        }
        
        .sprint-context h4 { 
            color: var(--green); 
            font-size: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .sprint-context h4 .icon { font-size: 32px; }
        
        .sprint-progress-text { 
            color: var(--white); 
            font-size: 18px; 
            opacity: 0.9;
        }
        
        /* Export */
        .export-buttons {
            display: flex;
            gap: 12px;
            margin-bottom: 28px;
        }
        
        
        /* Expandable */
        .expandable {
            border: 1px solid var(--grey-200);
            border-radius: 4px;
            margin-bottom: 16px;
            overflow: hidden;
        }
        
        .expandable-header {
            padding: 16px 20px;
            background: var(--white);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 500;
            font-size: 14px;
        }
        
        .expandable-header:hover { background: var(--grey-50); }
        
        .expandable-header .icon { color: var(--grey-500); transition: transform 0.2s; }
        
        .expandable.open .expandable-header .icon { transform: rotate(180deg); }
        
        .expandable-content {
            padding: 20px;
            border-top: 1px solid var(--grey-200);
            display: none;
            background: var(--grey-50);
        }
        
        .expandable.open .expandable-content { display: block; }
        
        /* Chart */
        .chart-bars { margin: 24px 0 0; }
        
        .chart-bar-item {
            display: flex;
            align-items: center;
            margin-bottom: 14px;
            gap: 16px;
        }
        
        .chart-bar-item:last-child { margin-bottom: 0; }
        
        .chart-bar-label {
            width: 80px;
            font-size: 12px;
            font-weight: 500;
            color: var(--grey-600);
            flex-shrink: 0;
        }
        
        .chart-bar-track {
            flex: 1;
            height: 20px;
            background: var(--grey-100);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .chart-bar-fill {
            height: 100%;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            color: white;
            font-weight: 600;
            font-size: 11px;
            min-width: 28px;
            transition: width 0.3s ease;
        }
        
        .chart-bar-fill.healthy { background: var(--green); }
        .chart-bar-fill.moderate { background: var(--amber); }
        .chart-bar-fill.critical { background: var(--red); }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header-content { flex-wrap: wrap; }
            .sprint-badge { display: none; }
            .hero { padding: 32px 24px; }
            .hero h1 { font-size: 20px; }
            .tabs-nav { overflow-x: auto; }
            .tab-btn { padding: 12px 16px; font-size: 13px; white-space: nowrap; }
            .progress-summary { grid-template-columns: repeat(2, 1fr); }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            .priority-cards { grid-template-columns: 1fr; }
            .action-fields { grid-template-columns: 1fr; }
            .action-tracker-row { grid-template-columns: 1fr; gap: 8px; }
            .sliders-grid { grid-template-columns: 1fr 1fr; }
            .sprint-complete-dates { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="header-left">
                <span class="sprint-badge"><strong>Sprint 5</strong> of 32 | Team Dynamics</span>
                <div class="sap-display">
                    <span class="icon icon-sm"><i data-lucide="star"></i></span>
                    <span id="sap-count">0 SAP</span>
                </div>
            </div>
            <div class="logo">
                <img src="fast track tool logo.png" alt="Fast Track">
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Tabs Navigation -->
        <nav class="tabs-nav">
            <button class="tab-btn active" onclick="showTab('reference')" id="tab-reference">
                <span class="icon icon-sm"><i data-lucide="book-open"></i></span>
                Reference
            </button>
            <button class="tab-btn" onclick="showTab('assessment')" id="tab-assessment">
                <span class="icon icon-sm"><i data-lucide="clipboard-list"></i></span>
                Assessment
            </button>
            <button class="tab-btn" onclick="showTab('scores')" id="tab-scores" disabled>
                <span class="icon icon-sm"><i data-lucide="lock"></i></span>
                Your Scores
            </button>
            <button class="tab-btn" onclick="showTab('action')" id="tab-action" disabled>
                <span class="icon icon-sm"><i data-lucide="lock"></i></span>
                Action Plan
            </button>
            <button class="tab-btn" onclick="showTab('dashboard')" id="tab-dashboard" disabled>
                <span class="icon icon-sm"><i data-lucide="lock"></i></span>
                Dashboard
            </button>
        </nav>

        <!-- TAB 1: REFERENCE -->
        <div id="reference" class="tab-content active">
            <div class="hero">
                <div class="hero-header">
                    <span class="icon icon-lg"><i data-lucide="lightbulb"></i></span>
                    <h1>Brain Juice Applied</h1>
                </div>
                <p class="hero-subtitle">Sprint 5 of 32 | Module: Individual & Company Identity</p>
                <p>Based on Patrick Lencioni's Five Dysfunctions Framework. Apply what you've learned to assess YOUR team.</p>
            </div>

            <div class="card">
                <h3>
                    <span class="icon icon-md"><i data-lucide="clipboard-list"></i></span>
                    Assessment Scope
                </h3>
                <div class="scope-grid">
                    <div class="scope-item">
                        <div class="scope-icon"><i data-lucide="users"></i></div>
                        <div>
                            <h4>Scope</h4>
                            <p>Your C-level team (5-8 direct reports)</p>
                        </div>
                    </div>
                    <div class="scope-item">
                        <div class="scope-icon"><i data-lucide="calendar"></i></div>
                        <div>
                            <h4>Time Frame</h4>
                            <p>Last 90 days observed</p>
                        </div>
                    </div>
                    <div class="scope-item">
                        <div class="scope-icon"><i data-lucide="eye"></i></div>
                        <div>
                            <h4>Perspective</h4>
                            <p>Your honest assessment as CEO</p>
                        </div>
                    </div>
                    <div class="scope-item">
                        <div class="scope-icon"><i data-lucide="x-circle"></i></div>
                        <div>
                            <h4>Exclude</h4>
                            <p>Yourself, board, indirect reports</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="warning-card">
                <h4>
                    <span class="icon icon-md"><i data-lucide="alert-triangle"></i></span>
                    Common Mistakes to Avoid
                </h4>
                <ul>
                    <li>Don't rate how you WANT team to be - rate CURRENT reality</li>
                    <li>Rate based on OBSERVED BEHAVIORS only</li>
                    <li>Don't confuse absence of dysfunction with presence of health</li>
                </ul>
            </div>

            <div class="card">
                <h3>
                    <span class="icon icon-md"><i data-lucide="check-circle"></i></span>
                    80/20 Key Learnings
                </h3>
                <div class="key-learning">
                    <span class="check-circle"><i data-lucide="check"></i></span>
                    <span>Building trust is fundamental - the foundation of all teamwork</span>
                </div>
                <div class="key-learning">
                    <span class="check-circle"><i data-lucide="check"></i></span>
                    <span>Constructive conflict drives innovation - embrace healthy debate</span>
                </div>
                <div class="key-learning">
                    <span class="check-circle"><i data-lucide="check"></i></span>
                    <span>Commitment leads to action - buy-in creates momentum</span>
                </div>
                <div class="key-learning">
                    <span class="check-circle"><i data-lucide="check"></i></span>
                    <span>Accountability sustains progress - peers hold each other to standards</span>
                </div>
                <div class="key-learning">
                    <span class="check-circle"><i data-lucide="check"></i></span>
                    <span>Focus on collective results - "we" over "me" wins</span>
                </div>
            </div>

            <div class="expandable" onclick="this.classList.toggle('open')">
                <div class="expandable-header">
                    <span style="display:flex; align-items:center; gap:10px;">
                        <span class="icon icon-sm"><i data-lucide="target"></i></span>
                        Tune In Questions (From Brain Juice)
                    </span>
                    <span class="icon icon-sm"><i data-lucide="chevron-down"></i></span>
                </div>
                <div class="expandable-content">
                    <ol style="margin-left: 20px; color: var(--grey-700);">
                        <li style="margin-bottom: 12px;">What are the most significant challenges your team currently faces in achieving its goals?</li>
                        <li style="margin-bottom: 12px;">How do you think trust, communication, and accountability influence your team's performance?</li>
                        <li>Why is it important for all team members to be aligned with the company's vision and values?</li>
                    </ol>
                </div>
            </div>

            <div class="btn-nav">
                <div></div>
                <button class="btn btn-primary" onclick="showTab('assessment')">
                    Begin Your Assessment
                    <span class="icon icon-sm"><i data-lucide="arrow-right"></i></span>
                </button>
            </div>
        </div>

        <!-- TAB 2: ASSESSMENT -->
        <div id="assessment" class="tab-content">
            <!-- Assessment Entry Point -->
            <div id="assessment-intro" class="card" style="text-align: center; padding: 60px 40px;">
                <div class="question-number-badge" style="margin: 0 auto 24px;">
                    <span class="icon icon-md"><i data-lucide="clipboard-check"></i></span>
                </div>
                <h2 style="margin-bottom: 12px;">Team Dysfunction Assessment</h2>
                <p style="color: var(--grey-600); margin-bottom: 32px; max-width: 480px; margin-left: auto; margin-right: auto;">
                    15 questions about your team's dynamics. Takes 3-5 minutes.<br>
                    <strong>Answer honestly based on the last 90 days.</strong>
                </p>
                
                <div style="max-width: 400px; margin: 0 auto 32px;">
                    <div class="form-group" style="margin-bottom: 16px;">
                        <label style="text-align: left;">Your Name</label>
                        <input type="text" id="assessor-name" placeholder="e.g., Sarah Chen" style="font-size: 16px; padding: 14px 16px;">
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="text-align: left;">Your Role (Optional)</label>
                        <input type="text" id="assessor-role" placeholder="e.g., CFO" style="font-size: 16px; padding: 14px 16px;">
                    </div>
                </div>
                
                <button class="btn btn-primary btn-start" onclick="startAssessment()" id="start-assessment-btn" disabled style="padding: 18px 48px; font-size: 18px;">
                    Start Assessment 
                </button>
                
                <p style="margin-top: 24px; font-size: 13px; color: var(--grey-500);">
                    or <a href="#" onclick="loadExampleAssessment(); return false;" style="color: var(--yellow-600);">load example assessment</a>
                </p>
            </div>
            
            <!-- Back to Reference -->
            <div class="btn-nav" style="margin-top: 24px;">
                <button class="btn btn-secondary" onclick="showTab('reference')">
                    <span class="icon icon-sm"><i data-lucide="arrow-left"></i></span>
                    Back to Reference
                </button>
            </div>
        </div>
        
        <!-- FULL-SCREEN ASSESSMENT SLIDES (outside tab container) -->
        <div id="assessment-fullscreen" class="assessment-fullscreen" style="display: none;">
            <!-- Progress Header -->
            <div class="slide-progress-header">
                <div class="slide-progress-inner">
                    <div class="slide-progress-text" id="slide-progress-text">Question 1 of 15</div>
                    <div class="slide-progress-bar">
                        <div class="slide-progress-fill" id="slide-progress-fill" style="width: 6.67%"></div>
                    </div>
                </div>
            </div>
            
            <!-- Exit button -->
            <button onclick="exitAssessment()" style="position: fixed; top: 20px; right: 24px; z-index: 1002; background: none; border: none; cursor: pointer; color: var(--grey-400); padding: 8px;">
                <span class="icon icon-md"><i data-lucide="x"></i></span>
            </button>
            
            <!-- Slides container - generated by JavaScript -->
            <div id="slides-container"></div>
            
            <!-- Results Slide -->
            <div id="results-slide" class="assessment-slide results-slide" style="display: none;">
                <div class="results-hero">
                    <div class="check-icon">
                        <span class="icon icon-lg"><i data-lucide="check"></i></span>
                    </div>
                    <h1>Assessment Complete</h1>
                    <p>Your team's top dysfunction areas identified</p>
                </div>
                
                <div class="sap-earned-card">
                    <span>Assessment Complete</span>
                    <strong>+25 SAP</strong>
                </div>
                
                <div class="priorities-simple" id="results-priorities"></div>
                
                <div class="key-insight-box" id="results-insight">
                    <h4> Key Insight</h4>
                    <p id="results-insight-text"></p>
                </div>
                
                <div class="next-steps-box">
                    <h4>What Happens Next</h4>
                    <ol>
                        <li>Guru compiles all team assessments</li>
                        <li>Team reviews during Fast Track hour</li>
                        <li>Team creates action plan together</li>
                    </ol>
                </div>
                
                <div class="results-actions">
                    <button class="btn btn-primary" onclick="exitAndGoToAction()">
                        Continue to Action Planning 
                    </button>
                    <button class="btn btn-secondary" onclick="copyAssessmentLink()">
                        <span class="icon icon-sm"><i data-lucide="link"></i></span>
                        Copy Link to Share
                    </button>
                </div>
            </div>
        </div>

        <!-- TAB 3: YOUR SCORES (NEW) -->
        <div id="scores" class="tab-content">
            <!-- Success Hero -->
            <div class="hero" style="background: var(--green);">
                <div class="hero-header">
                    <span class="icon icon-lg"><i data-lucide="check-circle"></i></span>
                    <h1 style="color: white;">Assessment Complete!</h1>
                </div>
                <p style="color: rgba(255,255,255,0.9);">You've honestly assessed your team's dynamics. Your Guru will compile everyone's responses for the team discussion.</p>
            </div>

            <!-- SAP Earned Card -->
            <div class="card" style="background: var(--yellow-400); border-color: var(--yellow-400);">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h3 style="margin-bottom: 8px;">
                            <span class="icon icon-md"><i data-lucide="star"></i></span>
                            SAP Earned
                        </h3>
                        <p style="margin: 0; font-size: 14px; opacity: 0.8;">For completing your individual assessment</p>
                    </div>
                    <div style="font-size: 48px; font-weight: 900; font-family: 'Plaak', sans-serif;">+25</div>
                </div>
            </div>

            <!-- Your 5 Dysfunction Scores -->
            <h2 style="margin-bottom: 24px;">Your Team's Dysfunction Scores</h2>
            
            <div id="dysfunction-scores-grid"></div>

            <!-- What Happens Next -->
            <div class="card">
                <h3>
                    <span class="icon icon-md"><i data-lucide="arrow-right-circle"></i></span>
                    What Happens Next
                </h3>
                <ol style="margin-left: 20px; color: var(--grey-700); line-height: 2;">
                    <li><strong>Guru Compiles Results:</strong> Your Guru will combine all team members' assessments</li>
                    <li><strong>Team Discussion:</strong> You'll review compiled results together during Fast Track hour</li>
                    <li><strong>Action Planning:</strong> Team collaboratively creates improvement plan (next tab)</li>
                    <li><strong>CEO Commitment:</strong> CEO commits to implementing actions at Forum</li>
                </ol>
            </div>

            <!-- Export Your Assessment -->
            <div class="card">
                <h3>
                    <span class="icon icon-md"><i data-lucide="share-2"></i></span>
                    Share Your Assessment
                </h3>
                <p style="color: var(--grey-600); margin-bottom: 20px;">
                    Send your results to your Guru for compilation.
                </p>
                <div style="display: flex; gap: 12px;">
                    <button class="btn btn-primary" onclick="window.print()">
                        <span class="icon icon-sm"><i data-lucide="file-text"></i></span>
                        Export PDF
                    </button>
                    <button class="btn btn-secondary" onclick="copyLink()">
                        <span class="icon icon-sm"><i data-lucide="link"></i></span>
                        Copy Link
                    </button>
                </div>
            </div>

            <div class="btn-nav">
                <button class="btn btn-secondary" onclick="showTab('assessment')">
                    <span class="icon icon-sm"><i data-lucide="arrow-left"></i></span>
                    Back to Assessment
                </button>
                <button class="btn btn-primary" onclick="showTab('action')">
                    Continue to Action Planning
                    <span class="icon icon-sm"><i data-lucide="arrow-right"></i></span>
                </button>
            </div>
        </div>

        <!-- TAB 4: ACTION PLAN -->
        <div id="action" class="tab-content">
            <!-- Collaborative Process Note -->
            <div class="card" style="background: var(--yellow-50); border-color: var(--yellow-300);">
                <h4 style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px;">
                    <span class="icon icon-md" style="color: var(--yellow-600);"><i data-lucide="info"></i></span>
                    Important: Collaborative Process
                </h4>
                <p style="margin: 0; color: var(--grey-700); line-height: 1.7;">
                    These priorities are based on YOUR assessment. During the Fast Track hour, your Guru will present 
                    COMPILED results from all team members, and the TEAM will collectively decide on the final 3 
                    priorities and action plan.
                </p>
            </div>

            <div class="card card-yellow">
                <h3>
                    <span class="icon icon-md"><i data-lucide="target"></i></span>
                    Team's Top 3 Priority Areas
                </h3>
                <p style="color: var(--grey-600); margin-bottom: 24px; margin-top: -16px; font-size: 13px;">Based on team's collective assessment. Complete these actions during your Fast Track hour.</p>
                <div class="priority-cards" id="priority-cards"></div>
            </div>

            <div id="action-cards-container"></div>

            <!-- Add Another Action Button -->
            <div id="add-action-btn-container" style="margin-bottom: 24px;"></div>

            <!-- Actions incomplete message -->
            <div id="actions-incomplete-msg" class="card" style="text-align: center; padding: 48px 32px; background: var(--grey-50); border: 2px dashed var(--grey-300);">
                <span class="icon icon-lg" style="color: var(--grey-400); margin-bottom: 16px;"><i data-lucide="clipboard-list"></i></span>
                <h4 style="margin-bottom: 8px; color: var(--grey-600);">Complete Your Action Plans</h4>
                <p style="color: var(--grey-500); margin-bottom: 0;">Fill out all 3 action cards above to unlock the commitment section</p>
                <div id="actions-progress" style="margin-top: 16px; display: flex; gap: 8px; justify-content: center;">
                    <span class="action-dot"></span>
                    <span class="action-dot"></span>
                    <span class="action-dot"></span>
                </div>
            </div>

            <div class="commitment-section" id="commitment-section" style="display: none;">
                <div style="background: var(--green); color: white; padding: 16px 20px; border-radius: 4px; margin-bottom: 24px; display: flex; align-items: center; gap: 12px;">
                    <span class="icon icon-md"><i data-lucide="check-circle"></i></span>
                    <div>
                        <strong style="font-size: 14px;">All Actions Complete!</strong>
                        <p style="margin: 0; font-size: 13px; opacity: 0.9;">Now make your public commitment below to lock in accountability.</p>
                    </div>
                </div>
                <h3>
                    <span class="icon icon-md"><i data-lucide="award"></i></span>
                    Public Commitment Declaration
                </h3>
                
                <div class="commitment-text">
                    I, <input type="text" id="ceo-name" placeholder="Your name" style="width: 180px;">, 
                    as CEO of <input type="text" id="company-name" placeholder="Company name" style="width: 200px;">, 
                    commit to implementing these 3 actions.
                </div>

                <div class="commitment-checkboxes">
                    <div class="checkbox-item">
                        <span class="icon icon-sm"><i data-lucide="check"></i></span>
                        <span>Implementing these 3 actions starting <strong id="first-action-date">[set date above]</strong></span>
                    </div>
                    <div class="checkbox-item">
                        <span class="icon icon-sm"><i data-lucide="check"></i></span>
                        <span>Presenting results at Forum meeting on <input type="date" id="forum-date"></span>
                    </div>
                    <div class="checkbox-item">
                        <span class="icon icon-sm"><i data-lucide="check"></i></span>
                        <span>Sharing with my leadership team on <input type="date" id="team-share-date"></span>
                    </div>
                    <div class="checkbox-item">
                        <span class="icon icon-sm"><i data-lucide="check"></i></span>
                        <span>Reviewing progress monthly with my Guru (scheduled for <input type="date" id="guru-review-date">)</span>
                    </div>
                    <div class="checkbox-item" style="margin-top: 20px; background: var(--grey-50); padding: 16px; border-radius: 4px;">
                        <input type="checkbox" id="binding-commitment">
                        <span><strong>I understand this is a BINDING COMMITMENT witnessed by my Forum peers</strong></span>
                    </div>
                </div>

                <div class="forum-peers">
                    <h5>
                        <span class="icon icon-sm"><i data-lucide="megaphone"></i></span>
                        This commitment will be visible to:
                    </h5>
                    <div class="peers-list">
                        <div class="peer-item">Maria Santos - CEO, TechCorp Manufacturing</div>
                        <div class="peer-item">John Peterson - CEO, HealthPlus Medical</div>
                        <div class="peer-item">Sarah Chen - CEO, GreenEnergy Solutions</div>
                        <div class="peer-item">Mike Rodriguez - CEO, DataFlow Systems</div>
                        <div class="peer-item">Lisa Kumar - CEO, CloudFirst Technologies</div>
                        <div class="peer-item">Tom Anderson - CEO, RetailMax Group</div>
                        <div class="peer-item">Jennifer Lee - CEO, BuildRight Construction</div>
                        <div class="peer-item">David Park - CEO, FinanceHub</div>
                    </div>
                </div>

                <div class="guru-note">
                    <span class="icon icon-sm"><i data-lucide="user"></i></span>
                    Your Guru will review this assessment before your Forum presentation
                </div>

                <div class="signature-field">
                    <label>
                        <span class="icon icon-sm"><i data-lucide="pen-tool"></i></span>
                        Digital Signature (type your full name)
                    </label>
                    <input type="text" id="signature" placeholder="Type your full name to sign">
                </div>
            </div>

            <div class="btn-nav">
                <button class="btn btn-secondary" onclick="showTab('assessment')">
                    <span class="icon icon-sm"><i data-lucide="arrow-left"></i></span>
                    Back to Assessment
                </button>
                <button class="btn btn-primary" onclick="showTab('dashboard')" id="view-dashboard-btn" disabled>
                    View Dashboard
                    <span class="icon icon-sm"><i data-lucide="arrow-right"></i></span>
                </button>
            </div>
        </div>

        <!-- TAB 4: DASHBOARD -->
        <div id="dashboard" class="tab-content">
            <div class="export-buttons">
                <button class="btn btn-primary" onclick="window.print()">
                    <span class="icon icon-sm"><i data-lucide="file-text"></i></span>
                    Export PDF
                </button>
                <button class="btn btn-secondary" onclick="copyLink()">
                    <span class="icon icon-sm"><i data-lucide="link"></i></span>
                    Copy Link
                </button>
            </div>

            <div class="mastery-card">
                <div class="mastery-header">
                    <div class="mastery-level">
                        Current Level
                        <span id="mastery-level">NOVICE</span>
                    </div>
                    <div class="mastery-sap">
                        <div class="value" id="mastery-sap">0</div>
                        <div class="label">SAP</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-bar-fill" id="mastery-progress" style="width: 0%"></div>
                </div>
                <div class="mastery-next" id="mastery-next">200 more SAP needed for PRACTITIONER level</div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="icon-wrap"><i data-lucide="bar-chart-2"></i></div>
                    <div class="value" id="overall-score">0.0</div>
                    <div class="label">Team Health Score</div>
                </div>
                <div class="stat-card">
                    <div class="icon-wrap" id="critical-icon-wrap"><i data-lucide="alert-triangle"></i></div>
                    <div class="value" id="critical-count">0</div>
                    <div class="label">Critical Areas</div>
                </div>
                <div class="stat-card">
                    <div class="icon-wrap"><i data-lucide="clipboard-check"></i></div>
                    <div class="value" id="actions-count">0</div>
                    <div class="label">Actions Committed</div>
                </div>
                <div class="stat-card">
                    <div class="icon-wrap yellow"><i data-lucide="star"></i></div>
                    <div class="value" style="color: var(--yellow-600);" id="sap-earned">+0</div>
                    <div class="label">SAP Earned</div>
                </div>
            </div>

            <div class="sprint-context">
                <h4>
                    <span class="icon icon-lg"><i data-lucide="trophy"></i></span>
                    Sprint 5 of 32 Complete!
                </h4>
                <div class="sprint-progress-text"> You're 15.6% through the Fast Track Program</div>
            </div>

            <div class="card">
                <h3>
                    <span class="icon icon-md"><i data-lucide="grid-3x3"></i></span>
                    Team Health Heat Map
                </h3>
                <div class="heat-map">
                    <table id="heat-map-table">
                        <thead>
                            <tr>
                                <th>Team Member</th>
                                <th>Role</th>
                                <th>Trust</th>
                                <th>Conflict</th>
                                <th>Commit</th>
                                <th>Account</th>
                                <th>Results</th>
                            </tr>
                        </thead>
                        <tbody id="heat-map-body"></tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                <h3>
                    <span class="icon icon-md"><i data-lucide="bar-chart-2"></i></span>
                    Dysfunction Scores
                </h3>
                <div class="chart-bars" id="chart-bars"></div>
            </div>

            <div class="card">
                <h3>
                    <span class="icon icon-md"><i data-lucide="clipboard-list"></i></span>
                    Action Tracker
                </h3>
                <div id="action-tracker">
                    <div class="action-tracker-row">
                        <div>Dysfunction</div>
                        <div>Action</div>
                        <div>Owner</div>
                        <div>Start</div>
                        <div>Status</div>
                    </div>
                </div>
            </div>

            <div class="reflection-section">
                <h3>
                    <span class="icon icon-md"><i data-lucide="edit-3"></i></span>
                    Reflection Time
                </h3>
                <p>Before presenting at Forum, reflect on these questions from your Brain Juice:</p>
                
                <div class="reflection-question">
                    <label>How will you actively contribute to building trust within your team?</label>
                    <textarea id="reflection-trust" placeholder="Reflect on your role in building trust..."></textarea>
                </div>
                <div class="reflection-question">
                    <label>What steps will you take to ensure that conflict is managed constructively?</label>
                    <textarea id="reflection-conflict" placeholder="Reflect on how you'll handle conflict..."></textarea>
                </div>
                <div class="reflection-question">
                    <label>How can you reinforce accountability and ensure team goals are prioritized?</label>
                    <textarea id="reflection-accountability" placeholder="Reflect on accountability systems..."></textarea>
                </div>
            </div>

            <div class="sprint-complete-card">
                <h3>
                    <span class="icon icon-md"><i data-lucide="sparkles"></i></span>
                    Sprint Complete!
                </h3>
                <p>You've committed to meaningful action. Strong momentum!</p>
                <div class="sprint-complete-dates">
                    <div><label>Forum Date</label><span id="final-forum-date">Not set</span></div>
                    <div><label>Team Share</label><span id="final-team-date">Not set</span></div>
                    <div><label>Guru Review</label><span id="final-guru-date">Scheduled</span></div>
                </div>
            </div>

            <div class="btn-nav">
                <button class="btn btn-secondary" onclick="showTab('action')">
                    <span class="icon icon-sm"><i data-lucide="arrow-left"></i></span>
                    Back to Action Plan
                </button>
                <button class="btn btn-yellow" onclick="if(confirm('Start new assessment? This will reset all data.')) location.reload();">
                    <span class="icon icon-sm"><i data-lucide="refresh-cw"></i></span>
                    Start New Assessment
                </button>
            </div>
        </div>
    </div>


    <script>
        // Initialize Lucide icons
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
            init();
        });

        // Data - The 15 Behavioral Statements (Lencioni's Framework)
        const STATEMENTS = [
            { id: 1, text: "Team members are passionate and unguarded in the discussion of issues.", dysfunction: "conflict", hint: "Do people speak freely or hold back?" },
            { id: 2, text: "Team members call out one another's deficiencies or unproductive behaviors.", dysfunction: "accountability", hint: "Do peers address issues directly?" },
            { id: 3, text: "Team members know what their peers are working on and how they contribute to the collective good of the team.", dysfunction: "commitment", hint: "Is everyone aligned on team goals?" },
            { id: 4, text: "Team members quickly and genuinely apologize to one another when they say or do something inappropriate or possibly damaging to the team.", dysfunction: "trust", hint: "Do people admit mistakes easily?" },
            { id: 5, text: "Team members willingly make sacrifices (such as budget, turf, head count) in their departments or areas of expertise for the good of the team.", dysfunction: "results", hint: "Does 'we' win over 'me'?" },
            { id: 6, text: "Team members openly admit their weaknesses and mistakes.", dysfunction: "trust", hint: "Is vulnerability safe in your team?" },
            { id: 7, text: "Team meetings are compelling and not boring.", dysfunction: "conflict", hint: "Are meetings engaging or dull?" },
            { id: 8, text: "Team members leave meetings confident that their peers are completely committed to the decisions that were agreed on, even if there was initial disagreement.", dysfunction: "commitment", hint: "Do decisions stick?" },
            { id: 9, text: "Morale is significantly affected by the failure to achieve team goals.", dysfunction: "results", hint: "Does team success matter to everyone?" },
            { id: 10, text: "During team meetings, the most important and difficult issues are put on the table to be resolved.", dysfunction: "conflict", hint: "Do you tackle the hard topics?" },
            { id: 11, text: "Team members are deeply concerned about the prospect of letting down their peers.", dysfunction: "accountability", hint: "Do people care about peer expectations?" },
            { id: 12, text: "Team members know about one another's personal lives and are comfortable discussing them.", dysfunction: "trust", hint: "Is there personal connection?" },
            { id: 13, text: "Team members end discussions with clear and specific resolutions and call to action.", dysfunction: "commitment", hint: "Are decisions clear and actionable?" },
            { id: 14, text: "Team members challenge one another about their plans and approaches.", dysfunction: "accountability", hint: "Do people constructively challenge each other?" },
            { id: 15, text: "Team members are slow to seek credit for their own contributions but quick to point out those of others.", dysfunction: "results", hint: "Who gets recognized - individuals or the team?" }
        ];

        const DYSFUNCTIONS = [
            { id: 'trust', name: 'Absence of Trust', shortName: 'Trust', statements: [4, 6, 12] },
            { id: 'conflict', name: 'Fear of Conflict', shortName: 'Conflict', statements: [1, 7, 10] },
            { id: 'commitment', name: 'Lack of Commitment', shortName: 'Commit', statements: [3, 8, 13] },
            { id: 'accountability', name: 'Avoidance of Accountability', shortName: 'Account', statements: [2, 11, 14] },
            { id: 'results', name: 'Inattention to Results', shortName: 'Results', statements: [5, 9, 15] }
        ];

        const BRAIN_JUICE_ACTIONS = {
            trust: ['Share personal stories at meeting start (5 min)', 'Monthly team-building vulnerability exercises', 'Quarterly strengths/weaknesses disclosure', 'Weekly check-ins promoting openness'],
            conflict: ['Establish norms for healthy debate', 'Create safe space with "devils advocate" role', 'Encourage diverse viewpoints round-robin', 'Real-time conflict resolution training'],
            commitment: ['"Disagree and commit" protocol', 'Decision clarity rounds at meeting end', 'Written commitment documentation', 'Regular commitment reviews'],
            accountability: ['Clear performance expectations documented', 'Peer-to-peer accountability partners', 'Regular progress reviews in meetings', 'Constructive call-out culture'],
            results: ['Align individual with team goals quarterly', 'Shared success metrics dashboard', 'Celebrate collective achievements', '"We over me" recognition programs']
        };

        const EXAMPLE_ASSESSMENT = {
            assessorName: "Sarah Chen",
            assessorRole: "CFO",
            responses: {
                1: 2, 2: 1, 3: 3, 4: 2, 5: 3,
                6: 2, 7: 2, 8: 1, 9: 3, 10: 2,
                11: 2, 12: 3, 13: 1, 14: 2, 15: 3
            }
        };

        // State
        let assessment = {
            assessorName: '',
            assessorRole: '',
            responses: {},
            scoresViewed: false
        };
        let actions = [{}, {}, {}];
        let currentTab = 'reference';

        // Initialize
        function init() {
            // Initialize empty responses for all 15 statements
            STATEMENTS.forEach(s => {
                assessment.responses[s.id] = 0;
            });
            updateProgress();
            
            // Enable start button when name is entered
            const nameInput = document.getElementById('assessor-name');
            if (nameInput) {
                nameInput.addEventListener('input', function() {
                    const startBtn = document.getElementById('start-assessment-btn');
                    if (startBtn) {
                        startBtn.disabled = !this.value.trim();
                    }
                });
            }
            
            ['assessor-name', 'assessor-role', 'ceo-name', 'company-name', 'forum-date', 'team-share-date', 'guru-review-date', 'binding-commitment', 'signature'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.addEventListener('change', updateProgress);
                if (el) el.addEventListener('input', updateProgress);
            });
            
            // Add keyboard listener for assessment
            document.addEventListener('keydown', handleKeyPress);
        }

        // ================================================
        // TYPEFORM-STYLE SLIDE ASSESSMENT
        // ================================================
        
        let currentSlide = 0;
        
        function startAssessment() {
            const nameInput = document.getElementById('assessor-name');
            if (!nameInput?.value.trim()) {
                nameInput.focus();
                return;
            }
            
            // Generate slides
            generateSlides();
            
            // Show fullscreen assessment
            document.getElementById('assessment-fullscreen').style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            // Show first slide
            currentSlide = 1;
            showSlide(1);
            updateSlideProgress();
            
            lucide.createIcons();
        }
        
        function generateSlides() {
            const container = document.getElementById('slides-container');
            container.innerHTML = STATEMENTS.map((stmt, index) => `
                <div id="slide-${index + 1}" class="assessment-slide ${index === 0 ? 'active' : ''}">
                    <div class="question-number-badge">${index + 1}</div>
                    
                    <h2 class="question-primary">${stmt.hint}</h2>
                    
                    <p class="question-context">${stmt.text}</p>
                    
                    <div class="answer-buttons">
                        <button class="answer-btn" onclick="answerQuestion(${stmt.id}, 1, this)" data-rating="1">
                            Rarely
                        </button>
                        <button class="answer-btn" onclick="answerQuestion(${stmt.id}, 2, this)" data-rating="2">
                            Sometimes
                        </button>
                        <button class="answer-btn" onclick="answerQuestion(${stmt.id}, 3, this)" data-rating="3">
                            Usually
                        </button>
                    </div>
                    
                    <div class="slide-nav">
                        <button class="btn-text-nav" onclick="prevSlide()" ${index === 0 ? 'disabled' : ''}>
                             Back
                        </button>
                        <button class="btn-text-nav" onclick="skipSlide()">
                            Skip 
                        </button>
                    </div>
                    
                    <div class="keyboard-hint">
                        Press <strong>1</strong>, <strong>2</strong>, or <strong>3</strong> to answer
                    </div>
                </div>
            `).join('');
        }
        
        function showSlide(num) {
            // Hide all slides
            document.querySelectorAll('.assessment-slide').forEach(s => {
                s.classList.remove('active');
                s.style.display = 'none';
            });
            
            // Show current slide
            const slide = document.getElementById(`slide-${num}`);
            if (slide) {
                slide.style.display = 'flex';
                slide.classList.add('active');
                
                // Restore any previous answer
                const existingAnswer = assessment.responses[num];
                if (existingAnswer) {
                    const btns = slide.querySelectorAll('.answer-btn');
                    btns.forEach(btn => {
                        btn.classList.remove('selected', 'selected-bad', 'selected-moderate', 'selected-good');
                        if (parseInt(btn.dataset.rating) === existingAnswer) {
                            const colorClass = existingAnswer === 1 ? 'selected-bad' : existingAnswer === 2 ? 'selected-moderate' : 'selected-good';
                            btn.classList.add('selected', colorClass);
                        }
                    });
                }
            }
        }
        
        function updateSlideProgress() {
            const progressText = document.getElementById('slide-progress-text');
            const progressFill = document.getElementById('slide-progress-fill');
            
            if (progressText) {
                progressText.textContent = `Question ${currentSlide} of 15`;
            }
            if (progressFill) {
                progressFill.style.width = `${(currentSlide / 15) * 100}%`;
            }
        }
        
        function answerQuestion(questionId, rating, btnElement) {
            assessment.responses[questionId] = rating;
            
            // Visual feedback
            const slide = btnElement.closest('.assessment-slide');
            slide.querySelectorAll('.answer-btn').forEach(btn => {
                btn.classList.remove('selected', 'selected-bad', 'selected-moderate', 'selected-good');
            });
            
            const colorClass = rating === 1 ? 'selected-bad' : rating === 2 ? 'selected-moderate' : 'selected-good';
            btnElement.classList.add('selected', colorClass);
            
            // Auto-advance after 400ms
            setTimeout(() => {
                if (currentSlide < 15) {
                    nextSlide();
                } else {
                    showResults();
                }
            }, 400);
        }
        
        function nextSlide() {
            if (currentSlide < 15) {
                currentSlide++;
                showSlide(currentSlide);
                updateSlideProgress();
            } else {
                showResults();
            }
        }
        
        function prevSlide() {
            if (currentSlide > 1) {
                currentSlide--;
                showSlide(currentSlide);
                updateSlideProgress();
            }
        }
        
        function skipSlide() {
            nextSlide();
        }
        
        function handleKeyPress(e) {
            // Only handle when assessment is visible
            if (document.getElementById('assessment-fullscreen').style.display !== 'block') return;
            if (document.getElementById('results-slide').style.display === 'flex') return;
            
            const slide = document.querySelector('.assessment-slide.active');
            if (!slide) return;
            
            if (e.key === '1' || e.key === '2' || e.key === '3') {
                const rating = parseInt(e.key);
                const stmtId = currentSlide;
                const btn = slide.querySelector(`.answer-btn[data-rating="${rating}"]`);
                if (btn) answerQuestion(stmtId, rating, btn);
            } else if (e.key === 'ArrowRight' || e.key === 'Enter') {
                if (assessment.responses[currentSlide]) {
                    nextSlide();
                }
            } else if (e.key === 'ArrowLeft') {
                prevSlide();
            } else if (e.key === 'Escape') {
                exitAssessment();
            }
        }
        
        function showResults() {
            // Calculate scores
            const scores = calculateScores();
            const priorities = getPrioritiesForResults(scores);
            
            // Render results
            renderResults(priorities, scores);
            
            // Hide all question slides, show results
            document.querySelectorAll('.assessment-slide').forEach(s => {
                s.style.display = 'none';
                s.classList.remove('active');
            });
            
            document.getElementById('results-slide').style.display = 'flex';
            document.getElementById('results-slide').classList.add('active');
            
            // Update progress bar to 100%
            document.getElementById('slide-progress-text').textContent = 'Complete!';
            document.getElementById('slide-progress-fill').style.width = '100%';
            
            // Update SAP
            updateProgress();
            
            lucide.createIcons();
        }
        
        function getPrioritiesForResults(scores) {
            return Object.entries(scores)
                .map(([id, score]) => {
                    const dysfunction = DYSFUNCTIONS.find(d => d.id === id);
                    return {
                        id,
                        name: dysfunction.name,
                        score,
                        status: score >= 8 ? 'healthy' : score >= 6 ? 'moderate' : 'critical',
                        insight: generateInsight(id, score)
                    };
                })
                .sort((a, b) => a.score - b.score)
                .slice(0, 3);
        }
        
        function generateInsight(dysfunctionId, score) {
            const insights = {
                trust: score < 6 ? "Low vulnerability. Build psychological safety first." : "Moderate trust. Continue vulnerability exercises.",
                conflict: score < 6 ? "Artificial harmony. Establish debate norms." : "Some healthy conflict. Encourage more.",
                commitment: score < 6 ? "Decisions don't stick. Team needs clarity protocols." : "Moderate commitment. Clarify decisions better.",
                accountability: score < 6 ? "Peers avoid confrontation. Create peer accountability culture." : "Some peer accountability. Make it systematic.",
                results: score < 6 ? "Individual focus trumps team goals. Realign incentives." : "Moderate team focus. Celebrate collective wins."
            };
            return insights[dysfunctionId] || "Needs attention.";
        }
        
        function renderResults(priorities, scores) {
            // Render priority boxes
            const prioritiesContainer = document.getElementById('results-priorities');
            prioritiesContainer.innerHTML = priorities.map((p, i) => `
                <div class="priority-box ${p.status}">
                    <div class="priority-label">Priority #${i + 1}</div>
                    <h3>${p.name}</h3>
                    <div class="priority-score">${p.score}/9</div>
                    <p class="priority-insight">${p.insight}</p>
                </div>
            `).join('');
            
            // Render key insight
            const topPriority = priorities[0];
            document.getElementById('results-insight-text').innerHTML = 
                `Your team's biggest gap is <strong>${topPriority.name.toLowerCase()}</strong> (${topPriority.score}/9). ${topPriority.insight} This is where you should focus your action planning.`;
        }
        
        function exitAssessment() {
            document.getElementById('assessment-fullscreen').style.display = 'none';
            document.body.style.overflow = '';
        }
        
        function exitAndGoToAction() {
            exitAssessment();
            showTab('action');
            renderActionTab();
        }
        
        function loadExampleAssessment() {
            // Load example data
            const example = {
                1: 2, 2: 1, 3: 3, 4: 2, 5: 3,
                6: 2, 7: 2, 8: 1, 9: 3, 10: 2,
                11: 2, 12: 3, 13: 1, 14: 2, 15: 3
            };
            
            Object.entries(example).forEach(([id, rating]) => {
                assessment.responses[parseInt(id)] = rating;
            });
            
            document.getElementById('assessor-name').value = 'Sarah Chen';
            document.getElementById('assessor-role').value = 'CFO';
            
            // Enable and click start
            document.getElementById('start-assessment-btn').disabled = false;
            startAssessment();
            
            // Jump to results
            setTimeout(() => showResults(), 100);
        }

        // Tab Navigation
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            
            document.getElementById(tabId).classList.add('active');
            
            // Find and activate the corresponding tab button
            const tabBtn = document.getElementById('tab-' + tabId);
            if (tabBtn) {
                tabBtn.classList.add('active');
            } else if (event && event.target) {
                const clickedTab = event.target.closest('.tab-btn');
                if (clickedTab) clickedTab.classList.add('active');
            }
            
            currentTab = tabId;
            
            if (tabId === 'scores') {
                assessment.scoresViewed = true;
                renderScoresTab();
            }
            if (tabId === 'action') renderActionTab();
            if (tabId === 'dashboard') renderDashboard();
            
            updateProgress();
            lucide.createIcons();
            window.scrollTo(0, 0);
        }

        // Helpers - New scoring for 1-3 scale (max 9 per dysfunction)
        function getStatus(score) {
            if (score >= 8) return 'healthy';
            if (score >= 6) return 'moderate';
            return 'critical';
        }

        function getStatusLabel(score) {
            if (score >= 8) return 'NO PROBLEM';
            if (score >= 6) return 'POSSIBLE PROBLEM';
            return 'SERIOUS PROBLEM';
        }

        function getRatingLabel(rating) {
            if (rating === 3) return 'Usually';
            if (rating === 2) return 'Sometimes';
            if (rating === 1) return 'Rarely';
            return '-';
        }

        function getRatingStatus(rating) {
            if (rating === 3) return 'good';
            if (rating === 2) return 'moderate';
            if (rating === 1) return 'bad';
            return '';
        }

        // Calculate dysfunction scores from statement responses
        function calculateScores() {
            const scores = {};
            DYSFUNCTIONS.forEach(d => {
                const stmtScores = d.statements.map(id => assessment.responses[id] || 0);
                scores[d.id] = stmtScores.reduce((a, b) => a + b, 0);
            });
            return scores;
        }

        function calcAverage(arr) {
            const valid = arr.filter(v => v > 0);
            return valid.length ? valid.reduce((a, b) => a + b, 0) / valid.length : 0;
        }

        // Render 15 Statement Cards
        function renderStatements() {
            const container = document.getElementById('statements-container');
            if (!container) return;
            
            container.innerHTML = STATEMENTS.map(stmt => {
                const currentRating = assessment.responses[stmt.id] || 0;
                const isComplete = currentRating > 0;
                
                return `
                    <div class="statement-card ${isComplete ? 'completed' : ''}" id="statement-card-${stmt.id}">
                        <!-- Header with number + hint question (no dysfunction label) -->
                        <div style="display: flex; align-items: flex-start; gap: 12px; margin-bottom: 16px;">
                            <div class="statement-number">${stmt.id}</div>
                            <div style="flex: 1;">
                                <div style="font-size: 18px; color: var(--grey-900); margin-bottom: 12px; display: flex; align-items: center; gap: 10px; line-height: 1.5; font-weight: 600;">
                                    <span class="icon icon-md" style="color: var(--yellow-600);"><i data-lucide="lightbulb"></i></span>
                                    ${stmt.hint}
                                </div>
                                <div style="font-size: 11px; line-height: 1.7; color: var(--grey-600);">
                                    ${stmt.text}
                                </div>
                            </div>
                            ${isComplete ? '<span class="icon icon-sm" style="color: var(--green); flex-shrink: 0;"><i data-lucide="check-circle"></i></span>' : ''}
                        </div>
                        
                        <!-- Rating buttons WITHOUT numbers -->
                        <div class="rating-buttons">
                            <button class="rating-btn ${currentRating === 1 ? 'active rating-bad' : ''}" onclick="rateStatement(${stmt.id}, 1)">
                                <span class="rating-label-only">Rarely</span>
                            </button>
                            <button class="rating-btn ${currentRating === 2 ? 'active rating-moderate' : ''}" onclick="rateStatement(${stmt.id}, 2)">
                                <span class="rating-label-only">Sometimes</span>
                            </button>
                            <button class="rating-btn ${currentRating === 3 ? 'active rating-good' : ''}" onclick="rateStatement(${stmt.id}, 3)">
                                <span class="rating-label-only">Usually</span>
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
            
            lucide.createIcons();
        }

        function rateStatement(statementId, rating) {
            assessment.responses[statementId] = rating;
            
            // Flash animation
            const card = document.getElementById(`statement-card-${statementId}`);
            if (card) {
                card.style.background = 'var(--yellow-100)';
                setTimeout(() => {
                    card.style.background = '';
                    card.classList.add('completed');
                }, 200);
            }
            
            renderStatements();
            updateProgress();
            showToast();
        }

        function showToast() {
            const completed = Object.values(assessment.responses).filter(r => r > 0).length;
            const assessorName = document.getElementById('assessor-name')?.value.trim();
            
            if (completed === 15 && assessorName) {
                // Show completion toast
                const toast = document.createElement('div');
                toast.className = 'toast';
                toast.innerHTML = ' Assessment Complete! +25 SAP';
                toast.style.cssText = 'position:fixed;top:80px;right:24px;background:var(--green);color:white;padding:16px 24px;border-radius:4px;z-index:1000;font-weight:600;animation:slideIn 0.3s ease;';
                document.body.appendChild(toast);
                setTimeout(() => toast.remove(), 3000);
            }
        }

        function isAssessmentComplete() {
            const completed = Object.values(assessment.responses).filter(r => r > 0).length;
            const assessorName = document.getElementById('assessor-name')?.value.trim();
            return completed === 15 && assessorName;
        }

        // Progress
        function updateProgress() {
            const completed = Object.values(assessment.responses).filter(r => r > 0).length;
            const assessorName = document.getElementById('assessor-name')?.value.trim();
            const assessmentComplete = completed === 15 && assessorName;
            
            // Update progress display
            const statementsCount = document.getElementById('statements-count');
            const completionPct = document.getElementById('completion-pct');
            const sapProgress = document.getElementById('sap-progress');
            const assessmentStatus = document.getElementById('assessment-status');
            
            if (statementsCount) statementsCount.textContent = `${completed}/15`;
            if (completionPct) completionPct.textContent = `${Math.round((completed/15)*100)}%`;
            if (sapProgress) sapProgress.textContent = `+${assessmentComplete ? 25 : 0}`;
            if (assessmentStatus) {
                assessmentStatus.textContent = assessmentComplete ? 'Complete!' : 'In Progress';
                assessmentStatus.style.color = assessmentComplete ? 'var(--green)' : 'var(--amber)';
            }
            
            // Quick View with live scores
            const quickView = document.getElementById('quick-view');
            const quickItems = document.getElementById('quick-view-items');
            const scores = calculateScores();
            
            if (quickView && quickItems && completed > 0) {
                quickView.style.display = 'flex';
                quickItems.innerHTML = DYSFUNCTIONS.map(d => {
                    const hasAllStatements = d.statements.every(id => assessment.responses[id] > 0);
                    if (!hasAllStatements) return '';
                    return `
                        <div class="quick-view-item">
                            <span>${d.shortName}</span>
                            <span>${scores[d.id]}/9</span>
                            <div class="traffic-light ${getStatus(scores[d.id])}"></div>
                        </div>
                    `;
                }).join('');
            } else if (quickView) {
                quickView.style.display = 'none';
            }
            
            // Tab: Your Scores - unlocks when assessment complete
            const scoresTab = document.getElementById('tab-scores');
            const viewScoresBtn = document.getElementById('view-scores-btn');
            if (scoresTab) {
                scoresTab.disabled = !assessmentComplete;
                scoresTab.innerHTML = assessmentComplete 
                    ? '<span class="icon icon-sm"><i data-lucide="check-circle"></i></span> Your Scores'
                    : '<span class="icon icon-sm"><i data-lucide="lock"></i></span> Your Scores';
            }
            if (viewScoresBtn) viewScoresBtn.disabled = !assessmentComplete;
            
            // Tab: Action Plan - unlocks when scores viewed
            const actionTab = document.getElementById('tab-action');
            if (actionTab) {
                actionTab.disabled = !assessment.scoresViewed;
                actionTab.innerHTML = assessment.scoresViewed 
                    ? '<span class="icon icon-sm"><i data-lucide="check-circle"></i></span> Action Plan'
                    : '<span class="icon icon-sm"><i data-lucide="lock"></i></span> Action Plan';
            }
            
            // Tab: Dashboard - unlocks when commitment signed
            const dashboardComplete = checkDashboardComplete();
            const dashboardTab = document.getElementById('tab-dashboard');
            const viewDashboardBtn = document.getElementById('view-dashboard-btn');
            if (dashboardTab) {
                dashboardTab.disabled = !dashboardComplete;
                dashboardTab.innerHTML = dashboardComplete 
                    ? '<span class="icon icon-sm"><i data-lucide="check-circle"></i></span> Dashboard'
                    : '<span class="icon icon-sm"><i data-lucide="lock"></i></span> Dashboard';
            }
            if (viewDashboardBtn) viewDashboardBtn.disabled = !dashboardComplete;
            
            // SAP Display
            const sap = calculateSAP();
            const sapCount = document.getElementById('sap-count');
            if (sapCount) sapCount.textContent = `${sap} SAP`;
            
            lucide.createIcons();
        }

        function checkDashboardComplete() {
            // Must complete at least the top 3 priority actions (or all if less than 3)
            const minRequired = Math.min(3, actions.length);
            const topActions = actions.slice(0, minRequired);
            const topActionsComplete = topActions.length >= minRequired && topActions.every(a => 
                a.action && a.owner && a.frequency && a.startDate && a.successMetric
            );
            const commitmentComplete = document.getElementById('binding-commitment')?.checked && document.getElementById('signature')?.value.trim();
            return topActionsComplete && commitmentComplete;
        }

        function calculateSAP() {
            let sap = 0;
            // Assessment complete: +25
            if (isAssessmentComplete()) sap += 25;
            // Each action complete: +25 (max 75)
            actions.forEach(a => {
                if (a.action && a.owner && a.frequency && a.startDate && a.successMetric) sap += 25;
            });
            // Commitment signed: +25
            if (document.getElementById('binding-commitment')?.checked && document.getElementById('signature')?.value.trim()) sap += 25;
            return sap;
        }

        // Render Your Scores Tab
        function renderScoresTab() {
            const scores = calculateScores();
            const sorted = Object.entries(scores)
                .map(([id, score]) => ({
                    ...DYSFUNCTIONS.find(d => d.id === id),
                    score
                }))
                .sort((a, b) => a.score - b.score); // Lowest first (worst problems)
            
            const container = document.getElementById('dysfunction-scores-grid');
            if (!container) return;
            
            container.innerHTML = sorted.map((d, index) => `
                <div class="dysfunction-score-card ${getStatus(d.score)}">
                    <div class="dysfunction-score-header">
                        <div class="priority-badge">${index < 3 ? 'Priority #' + (index + 1) : ''}</div>
                        <div class="status-badge-lg ${getStatus(d.score)}">${getStatusLabel(d.score)}</div>
                    </div>
                    
                    <h3 style="margin: 16px 0;">${d.name}</h3>
                    
                    <div class="score-display">
                        <span class="score-value">${d.score}</span>
                        <span class="score-max">/9</span>
                    </div>
                    
                    <div class="score-breakdown">
                        <h5>Based on your ratings:</h5>
                        ${d.statements.map(stmtId => {
                            const stmt = STATEMENTS.find(s => s.id === stmtId);
                            const rating = assessment.responses[stmtId];
                            return `
                                <div class="statement-score-item">
                                    <span>Statement ${stmtId}</span>
                                    <span class="rating-${getRatingStatus(rating)}">${getRatingLabel(rating)} (${rating})</span>
                                </div>
                            `;
                        }).join('')}
                    </div>
                    
                    ${index < 3 ? `
                        <div class="action-preview">
                            <span class="icon icon-sm"><i data-lucide="target"></i></span>
                            This will be one of your top 3 action areas
                        </div>
                    ` : ''}
                </div>
            `).join('');
            
            lucide.createIcons();
        }

        // Action Tab
        function renderActionTab() {
            const scores = calculateScores();
            const priorities = DYSFUNCTIONS
                .map(d => ({ ...d, score: scores[d.id] }))
                .filter(d => d.score > 0)
                .sort((a, b) => a.score - b.score) // Lowest first (worst problems)
                .slice(0, 3);
            
            document.getElementById('priority-cards').innerHTML = priorities.map((p, i) => `
                <div class="priority-card ${getStatus(p.score)}">
                    <div class="priority-rank">#${i + 1}</div>
                    <div class="priority-name">${p.name}</div>
                    <div class="priority-score">${p.score}/9</div>
                    <div class="priority-status">${getStatusLabel(p.score)}</div>
                </div>
            `).join('') || '<p style="text-align:center; padding:40px; color:var(--grey-500); grid-column: 1/-1;">Complete assessment to see priorities</p>';
            
            // Build owners list from assessor + generic team roles
            const assessorName = document.getElementById('assessor-name')?.value || 'Team Member';
            const ceoName = document.getElementById('ceo-name')?.value || 'CEO';
            const owners = [
                `${ceoName} - CEO`,
                `${assessorName} - Assessor`,
                'Team Lead - Operations',
                'Team Lead - Finance', 
                'Team Lead - Technology',
                'Team Lead - Marketing'
            ];
            
            // Ensure we have at least 3 action slots for priorities
            while (actions.length < Math.min(3, priorities.length)) {
                actions.push({});
            }
            
            // Set dysfunction IDs for priority actions
            priorities.forEach((p, i) => {
                if (actions[i]) actions[i].dysfunctionId = p.id;
            });
            
            // Render all action cards (priority + additional)
            document.getElementById('action-cards-container').innerHTML = actions.map((action, i) => {
                const isPriority = i < priorities.length;
                const priority = isPriority ? priorities[i] : null;
                const dysfunction = priority || (action.dysfunctionId ? DYSFUNCTIONS.find(d => d.id === action.dysfunctionId) : null);
                
                return `
                    <div class="action-card">
                        <div class="action-card-header">
                            <span><strong>Action #${i + 1}:</strong> ${dysfunction ? dysfunction.name : 'Additional Action'}</span>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                ${!isPriority ? `<button onclick="removeAction(${i})" style="background: none; border: none; cursor: pointer; color: var(--grey-400); padding: 4px;"><span class="icon icon-sm"><i data-lucide="x"></i></span></button>` : ''}
                                <span style="padding:4px 12px; border-radius:4px; font-size:11px; font-weight:600; background:${isActionComplete(i) ? 'var(--green)' : 'var(--grey-200)'}; color:${isActionComplete(i) ? 'white' : 'var(--grey-600)'};">
                                    ${isActionComplete(i) ? 'Complete' : 'Incomplete'}
                                </span>
                            </div>
                        </div>
                        <div class="action-card-body">
                            ${dysfunction ? `
                                <div class="action-hint">
                                    <span class="icon icon-sm"><i data-lucide="book-open"></i></span>
                                    <span><strong>BRAIN JUICE:</strong> As a team, decide on specific actions to address ${dysfunction.name.toLowerCase()}. Use the framework you learned to guide your discussion.</span>
                                </div>
                            ` : ''}
                            
                            ${!isPriority ? `
                                <div class="form-group">
                                    <label>Focus Area (Optional)</label>
                                    <select onchange="updateAction(${i}, 'dysfunctionId', this.value)">
                                        <option value="">General / Multiple areas</option>
                                        ${DYSFUNCTIONS.map(d => `<option value="${d.id}" ${action.dysfunctionId === d.id ? 'selected' : ''}>${d.name}</option>`).join('')}
                                    </select>
                                </div>
                            ` : ''}
                            
                            <div class="form-group">
                                <label>Your Specific Action</label>
                                <textarea 
                                    placeholder="Describe the specific action your team will take..."
                                    onchange="updateAction(${i}, 'action', this.value)"
                                    oninput="updateAction(${i}, 'action', this.value)"
                                    style="min-height: 80px; resize: vertical;">${action.action || ''}</textarea>
                                ${dysfunction && BRAIN_JUICE_ACTIONS[dysfunction.id] ? `
                                    <div style="font-size: 12px; color: var(--grey-500); margin-top: 6px; display: flex; align-items: flex-start; gap: 6px;">
                                        <span class="icon icon-sm" style="color: var(--yellow-600); flex-shrink: 0;"><i data-lucide="lightbulb"></i></span>
                                        <span>Suggested: ${BRAIN_JUICE_ACTIONS[dysfunction.id].slice(0, 2).join(' | ')}</span>
                                    </div>
                                ` : ''}
                            </div>
                            
                            <div class="action-fields">
                                <div class="form-group">
                                    <label>Led by</label>
                                    <select onchange="updateAction(${i}, 'owner', this.value)">
                                        <option value="">Select owner...</option>
                                        ${owners.map(o => `<option value="${o}" ${action.owner === o ? 'selected' : ''}>${o}</option>`).join('')}
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Frequency</label>
                                    <select onchange="updateAction(${i}, 'frequency', this.value)">
                                        <option value="">Select...</option>
                                        <option value="daily" ${action.frequency === 'daily' ? 'selected' : ''}>Daily</option>
                                        <option value="weekly" ${action.frequency === 'weekly' ? 'selected' : ''}>Weekly</option>
                                        <option value="bi-weekly" ${action.frequency === 'bi-weekly' ? 'selected' : ''}>Bi-weekly</option>
                                        <option value="monthly" ${action.frequency === 'monthly' ? 'selected' : ''}>Monthly</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Starting</label>
                                    <input type="date" value="${action.startDate || ''}" onchange="updateAction(${i}, 'startDate', this.value)">
                                </div>
                            </div>
                            
                            <div class="form-group" style="margin-bottom:0;">
                                <label>Success Metric</label>
                                <textarea placeholder="e.g., Team vulnerability index increases from 3.2 to 6.0 within 90 days" onchange="updateAction(${i}, 'successMetric', this.value)">${action.successMetric || ''}</textarea>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            // Add "Add Another Action" button
            const addBtnContainer = document.getElementById('add-action-btn-container');
            if (addBtnContainer) {
                addBtnContainer.innerHTML = actions.length < 7 ? `
                    <button class="btn btn-secondary" onclick="addAction()" style="width: 100%;">
                        <span class="icon icon-sm"><i data-lucide="plus"></i></span>
                        Add Another Action (${actions.length}/7 maximum)
                    </button>
                ` : `<p style="text-align: center; color: var(--grey-500); font-size: 13px;">Maximum 7 actions reached</p>`;
            }
            
            if (actions[0]?.startDate) {
                document.getElementById('first-action-date').textContent = actions[0].startDate;
            }
            
            // Update action progress dots and show/hide commitment section
            const numPriorities = priorities.length;
            const completedActions = [0, 1, 2].slice(0, numPriorities).filter(i => isActionComplete(i)).length;
            const dots = document.querySelectorAll('.action-dot');
            dots.forEach((dot, i) => {
                if (i < numPriorities) {
                    dot.style.display = 'inline-block';
                    dot.classList.toggle('complete', isActionComplete(i));
                } else {
                    dot.style.display = 'none';
                }
            });
            
            const commitmentSection = document.getElementById('commitment-section');
            const incompleteMsg = document.getElementById('actions-incomplete-msg');
            
            // Show commitment section when all available actions are complete (or if no priorities)
            const allActionsComplete = numPriorities > 0 && completedActions >= numPriorities;
            
            if (allActionsComplete) {
                commitmentSection.style.display = 'block';
                incompleteMsg.style.display = 'none';
                // Scroll to commitment section smoothly (only if it just became visible)
                if (!commitmentSection.dataset.shown) {
                    commitmentSection.dataset.shown = 'true';
                    setTimeout(() => {
                        commitmentSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }, 100);
                }
            } else if (numPriorities === 0) {
                commitmentSection.dataset.shown = '';  // Reset for next time
                // No assessment data yet
                commitmentSection.style.display = 'none';
                incompleteMsg.innerHTML = `
                    <span class="icon icon-lg" style="color: var(--grey-400); margin-bottom: 16px;"><i data-lucide="alert-circle"></i></span>
                    <h4 style="margin-bottom: 8px; color: var(--grey-600);">Complete Your Assessment First</h4>
                    <p style="color: var(--grey-500); margin-bottom: 0;">Go back to the Assessment tab and rate your team members</p>
                `;
                incompleteMsg.style.display = 'block';
            } else {
                commitmentSection.style.display = 'none';
                commitmentSection.dataset.shown = '';  // Reset for next time
                incompleteMsg.innerHTML = `
                    <span class="icon icon-lg" style="color: var(--grey-400); margin-bottom: 16px;"><i data-lucide="clipboard-list"></i></span>
                    <h4 style="margin-bottom: 8px; color: var(--grey-600);">Complete Your Action Plans</h4>
                    <p style="color: var(--grey-500); margin-bottom: 0;">Fill out all ${numPriorities} action card${numPriorities > 1 ? 's' : ''} above to unlock the commitment section</p>
                    <div style="margin-top: 16px; display: flex; gap: 8px; justify-content: center;">
                        ${[0,1,2].slice(0, numPriorities).map(i => `<span class="action-dot ${isActionComplete(i) ? 'complete' : ''}"></span>`).join('')}
                    </div>
                `;
                incompleteMsg.style.display = 'block';
            }
            
            lucide.createIcons();
        }

        function isActionComplete(index) {
            const a = actions[index];
            return a && a.action && a.owner && a.frequency && a.startDate && a.successMetric;
        }

        function addAction() {
            if (actions.length < 7) {
                actions.push({
                    dysfunctionId: '',
                    action: '',
                    owner: '',
                    frequency: '',
                    startDate: '',
                    successMetric: ''
                });
                renderActionTab();
                lucide.createIcons();
            }
        }

        function removeAction(index) {
            // Only allow removing non-priority actions (index >= 3)
            if (index >= 3 && actions.length > 3) {
                actions.splice(index, 1);
                renderActionTab();
                updateProgress();
                lucide.createIcons();
            }
        }

        function updateAction(index, field, value) {
            actions[index][field] = value;
            if (field === 'startDate' && index === 0) {
                document.getElementById('first-action-date').textContent = value || '[set date above]';
            }
            renderActionTab();
            updateProgress();
        }

        // Dashboard
        function renderDashboard() {
            const scores = calculateScores();
            const totalScore = Object.values(scores).reduce((a, b) => a + b, 0);
            const overallScore = totalScore / 5; // Average of 5 dysfunctions
            const criticalCount = DYSFUNCTIONS.filter(d => scores[d.id] < 6).length;
            const sap = calculateSAP();
            const actionsCount = actions.filter((a, i) => isActionComplete(i)).length;
            
            document.getElementById('overall-score').textContent = overallScore.toFixed(1);
            document.getElementById('critical-count').textContent = criticalCount;
            document.getElementById('critical-icon-wrap').style.color = criticalCount > 0 ? 'var(--red)' : 'var(--green)';
            document.getElementById('actions-count').textContent = actionsCount;
            document.getElementById('sap-earned').textContent = `+${sap}`;
            
            const masteryLevel = sap < 200 ? 'NOVICE' : sap < 500 ? 'PRACTITIONER' : 'MASTER';
            const nextLevelSAP = masteryLevel === 'NOVICE' ? 200 : 500;
            const progress = Math.min((sap / nextLevelSAP) * 100, 100);
            
            document.getElementById('mastery-level').textContent = masteryLevel;
            document.getElementById('mastery-sap').textContent = sap;
            document.getElementById('mastery-progress').style.width = `${progress}%`;
            document.getElementById('mastery-next').textContent = `${nextLevelSAP - sap} more SAP needed for ${masteryLevel === 'NOVICE' ? 'PRACTITIONER' : 'MASTER'} level`;
            
            // Heat map shows YOUR scores (single row)
            const heatMapBody = document.getElementById('heat-map-body');
            const assessorName = document.getElementById('assessor-name')?.value || 'You';
            const assessorRole = document.getElementById('assessor-role')?.value || 'Team Member';
            heatMapBody.innerHTML = `
                <tr>
                    <td>${assessorName}</td>
                    <td>${assessorRole}</td>
                    ${DYSFUNCTIONS.map(d => `<td><span class="heat-cell ${getStatus(scores[d.id])}">${scores[d.id]}/9</span></td>`).join('')}
                </tr>
            `;
            
            document.getElementById('chart-bars').innerHTML = DYSFUNCTIONS.map(d => `
                <div class="chart-bar-item">
                    <div class="chart-bar-label">${d.shortName}</div>
                    <div class="chart-bar-track">
                        <div class="chart-bar-fill ${getStatus(scores[d.id])}" style="width: ${(scores[d.id] / 9) * 100}%">${scores[d.id]}/9</div>
                    </div>
                </div>
            `).join('');
            
            const tracker = document.getElementById('action-tracker');
            tracker.innerHTML = `
                <div class="action-tracker-row">
                    <div>Dysfunction</div>
                    <div>Action</div>
                    <div>Owner</div>
                    <div>Start</div>
                    <div>Status</div>
                </div>
            ` + actions.filter(a => a.action).map(a => {
                const dysfunction = DYSFUNCTIONS.find(d => d.id === a.dysfunctionId);
                return `
                    <div class="action-tracker-row">
                        <div>${dysfunction?.shortName || '-'}</div>
                        <div style="overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">${a.action}</div>
                        <div>${a.owner?.split(' - ')[0] || '-'}</div>
                        <div>${a.startDate || '-'}</div>
                        <div><span class="status-badge">Not Started</span></div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('final-forum-date').textContent = document.getElementById('forum-date')?.value || 'Not set';
            document.getElementById('final-team-date').textContent = document.getElementById('team-share-date')?.value || 'Not set';
            document.getElementById('final-guru-date').textContent = document.getElementById('guru-review-date')?.value || 'Scheduled';
            
            lucide.createIcons();
        }

        // Load Example Assessment
        function loadExample() {
            assessment.assessorName = EXAMPLE_ASSESSMENT.assessorName;
            assessment.assessorRole = EXAMPLE_ASSESSMENT.assessorRole;
            assessment.responses = { ...EXAMPLE_ASSESSMENT.responses };
            
            document.getElementById('assessor-name').value = EXAMPLE_ASSESSMENT.assessorName;
            document.getElementById('assessor-role').value = EXAMPLE_ASSESSMENT.assessorRole;
            
            renderStatements();
            updateProgress();
        }
        
        function loadExampleAndHide() {
            loadExample();
            hideExamplePrompt();
            // Scroll to first statement card
            const firstCard = document.querySelector('.statement-card');
            if (firstCard) {
                setTimeout(() => {
                    firstCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 100);
            }
        }
        
        function hideExamplePrompt() {
            const prompt = document.getElementById('example-prompt');
            if (prompt) {
                prompt.style.transition = 'all 0.3s ease';
                prompt.style.opacity = '0';
                prompt.style.transform = 'translateY(-10px)';
                setTimeout(() => {
                    prompt.style.display = 'none';
                }, 300);
            }
        }

        // Copy Link
        function copyLink() {
            const data = { assessment, actions };
            const encoded = btoa(JSON.stringify(data));
            navigator.clipboard.writeText(`${window.location.href}#data=${encoded}`).then(() => {
                alert('Assessment link copied! Share with your Guru or Forum peers.');
            });
        }
    </script>
</body>
</html>
